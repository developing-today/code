!function(){var $parcel$global="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},$parcel$modules={},$parcel$inits={},parcelRequire=$parcel$global.parcelRequire2d1f;null==parcelRequire&&((parcelRequire=function(e){if(e in $parcel$modules)return $parcel$modules[e].exports;if(e in $parcel$inits){var t=$parcel$inits[e];delete $parcel$inits[e];var r={id:e,exports:{}};return $parcel$modules[e]=r,t.call(r.exports,r,r.exports),r.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){$parcel$inits[e]=t},$parcel$global.parcelRequire2d1f=parcelRequire);var parcelRegister=parcelRequire.register;parcelRegister("frNQD",function(module,exports){!function(e,t){"function"==typeof define&&define.amd?define([],t):module.exports?module.exports=t():e.htmx=e.htmx||t()}("undefined"!=typeof self?self:this,function(){return function(){var Q={onLoad:F,process:zt,on:de,off:ge,trigger:ce,ajax:Nr,find:C,findAll:f,closest:v,values:function(e,t){return dr(e,t||"post").values},remove:_,addClass:z,removeClass:n,toggleClass:$,takeClass:W,defineExtension:Ur,removeExtension:Br,logAll:V,logNone:j,logger:null,config:{historyEnabled:!0,historyCacheSize:10,refreshOnHistoryMiss:!1,defaultSwapStyle:"innerHTML",defaultSwapDelay:0,defaultSettleDelay:20,includeIndicatorStyles:!0,indicatorClass:"htmx-indicator",requestClass:"htmx-request",addedClass:"htmx-added",settlingClass:"htmx-settling",swappingClass:"htmx-swapping",allowEval:!0,allowScriptTags:!0,inlineScriptNonce:"",attributesToSettle:["class","style","width","height"],withCredentials:!1,timeout:0,wsReconnectDelay:"full-jitter",wsBinaryType:"blob",disableSelector:"[hx-disable], [data-hx-disable]",useTemplateFragments:!1,scrollBehavior:"smooth",defaultFocusScroll:!1,getCacheBusterParam:!1,globalViewTransitions:!1,methodsThatUseUrlParams:["get"],selfRequestsOnly:!1,ignoreTitle:!1,scrollIntoViewOnBoost:!0,triggerSpecsCache:null},parseInterval:d,_:t,createEventSource:function(e){return new EventSource(e,{withCredentials:!0})},createWebSocket:function(e){var t=new WebSocket(e,[]);return t.binaryType=Q.config.wsBinaryType,t},version:"1.9.10"},r={addTriggerHandler:Lt,bodyContains:se,canAccessLocalStorage:U,findThisElement:xe,filterValues:yr,hasAttribute:o,getAttributeValue:te,getClosestAttributeValue:ne,getClosestMatch:c,getExpressionVars:Hr,getHeaders:xr,getInputValues:dr,getInternalData:ae,getSwapSpecification:wr,getTriggerSpecs:it,getTarget:ye,makeFragment:l,mergeObjects:le,makeSettleInfo:T,oobSwap:Ee,querySelectorExt:ue,selectAndSwap:je,settleImmediately:nr,shouldCancel:ut,triggerEvent:ce,triggerErrorEvent:fe,withExtensions:R},w=["get","post","put","delete","patch"],i=w.map(function(e){return"[hx-"+e+"], [data-hx-"+e+"]"}).join(", "),S=e("head"),q=e("title"),H=e("svg",!0);function e(e,t=!1){return RegExp(`<${e}(\\s[^>]*>|>)([\\s\\S]*?)<\\/${e}>`,t?"gim":"im")}function d(e){if(void 0==e)return;let t=NaN;return isNaN(t="ms"==e.slice(-2)?parseFloat(e.slice(0,-2)):"s"==e.slice(-1)?1e3*parseFloat(e.slice(0,-1)):"m"==e.slice(-1)?6e4*parseFloat(e.slice(0,-1)):parseFloat(e))?void 0:t}function ee(e,t){return e.getAttribute&&e.getAttribute(t)}function o(e,t){return e.hasAttribute&&(e.hasAttribute(t)||e.hasAttribute("data-"+t))}function te(e,t){return ee(e,t)||ee(e,"data-"+t)}function u(e){return e.parentElement}function re(){return document}function c(e,t){for(;e&&!t(e);)e=u(e);return e||null}function L(e,t,r){var n=te(t,r),i=te(t,"hx-disinherit");return e!==t&&i&&("*"===i||i.split(" ").indexOf(r)>=0)?"unset":n}function ne(e,t){var r=null;if(c(e,function(n){return r=L(e,n,t)}),"unset"!==r)return r}function h(e,t){var r=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector;return r&&r.call(e,t)}function A(e){var t=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i.exec(e);return t?t[1].toLowerCase():""}function a(e,t){for(var r=(new DOMParser).parseFromString(e,"text/html").body;t>0;)t--,r=r.firstChild;return null==r&&(r=re().createDocumentFragment()),r}function N(e){return/<body/.test(e)}function l(e){var t=!N(e),r=A(e),n=e;if("head"===r&&(n=n.replace(S,"")),Q.config.useTemplateFragments&&t)return a("<body><template>"+n+"</template></body>",0).querySelector("template").content;switch(r){case"thead":case"tbody":case"tfoot":case"colgroup":case"caption":return a("<table>"+n+"</table>",1);case"col":return a("<table><colgroup>"+n+"</colgroup></table>",2);case"tr":return a("<table><tbody>"+n+"</tbody></table>",2);case"td":case"th":return a("<table><tbody><tr>"+n+"</tr></tbody></table>",3);case"script":case"style":return a("<div>"+n+"</div>",1);default:return a(n,0)}}function ie(e){e&&e()}function I(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"}function k(e){return I(e,"Function")}function P(e){return I(e,"Object")}function ae(e){var t="htmx-internal-data",r=e[t];return r||(r=e[t]={}),r}function M(e){var t=[];if(e)for(var r=0;r<e.length;r++)t.push(e[r]);return t}function oe(e,t){if(e)for(var r=0;r<e.length;r++)t(e[r])}function X(e){var t=e.getBoundingClientRect(),r=t.top,n=t.bottom;return r<window.innerHeight&&n>=0}function se(e){return e.getRootNode&&e.getRootNode() instanceof window.ShadowRoot?re().body.contains(e.getRootNode().host):re().body.contains(e)}function D(e){return e.trim().split(/\s+/)}function le(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function E(e){try{return JSON.parse(e)}catch(e){return b(e),null}}function U(){var e="htmx:localStorageTest";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}function B(e){try{var t=new URL(e);return t&&(e=t.pathname+t.search),/^\/$/.test(e)||(e=e.replace(/\/+$/,"")),e}catch(t){return e}}function t(e){return Tr(re().body,function(){return eval(e)})}function F(e){return Q.on("htmx:load",function(t){e(t.detail.elt)})}function V(){Q.logger=function(e,t,r){console&&console.log(t,e,r)}}function j(){Q.logger=null}function C(e,t){return t?e.querySelector(t):C(re(),e)}function f(e,t){return t?e.querySelectorAll(t):f(re(),e)}function _(e,t){e=g(e),t?setTimeout(function(){_(e),e=null},t):e.parentElement.removeChild(e)}function z(e,t,r){e=g(e),r?setTimeout(function(){z(e,t),e=null},r):e.classList&&e.classList.add(t)}function n(e,t,r){e=g(e),r?setTimeout(function(){n(e,t),e=null},r):e.classList&&(e.classList.remove(t),0===e.classList.length&&e.removeAttribute("class"))}function $(e,t){(e=g(e)).classList.toggle(t)}function W(e,t){oe((e=g(e)).parentElement.children,function(e){n(e,t)}),z(e,t)}function v(e,t){if((e=g(e)).closest)return e.closest(t);do if(null==e||h(e,t))return e;while(e=e&&u(e))return null}function s(e,t){return e.substring(0,t.length)===t}function G(e,t){return e.substring(e.length-t.length)===t}function J(e){var t=e.trim();return s(t,"<")&&G(t,"/>")?t.substring(1,t.length-2):t}function Z(e,t){if(0===t.indexOf("closest "))return[v(e,J(t.substr(8)))];if(0===t.indexOf("find "))return[C(e,J(t.substr(5)))];if("next"===t)return[e.nextElementSibling];if(0===t.indexOf("next "))return[K(e,J(t.substr(5)))];if("previous"===t)return[e.previousElementSibling];if(0===t.indexOf("previous "))return[Y(e,J(t.substr(9)))];if("document"===t)return[document];else if("window"===t)return[window];else if("body"===t)return[document.body];else return re().querySelectorAll(J(t))}var K=function(e,t){for(var r=re().querySelectorAll(t),n=0;n<r.length;n++){var i=r[n];if(i.compareDocumentPosition(e)===Node.DOCUMENT_POSITION_PRECEDING)return i}},Y=function(e,t){for(var r=re().querySelectorAll(t),n=r.length-1;n>=0;n--){var i=r[n];if(i.compareDocumentPosition(e)===Node.DOCUMENT_POSITION_FOLLOWING)return i}};function ue(e,t){return t?Z(e,t)[0]:Z(re().body,e)[0]}function g(e){return I(e,"String")?C(e):e}function ve(e,t,r){return k(t)?{target:re().body,event:e,listener:t}:{target:g(e),event:t,listener:r}}function de(e,t,r){return jr(function(){var n=ve(e,t,r);n.target.addEventListener(n.event,n.listener)}),k(t)?t:r}function ge(e,t,r){return jr(function(){var n=ve(e,t,r);n.target.removeEventListener(n.event,n.listener)}),k(t)?t:r}var me=re().createElement("output");function pe(e,t){var r=ne(e,t);if(r){if("this"===r)return[xe(e,t)];var n=Z(e,r);return 0===n.length?(b('The selector "'+r+'" on '+t+" returned no matches!"),[me]):n}}function xe(e,t){return c(e,function(e){return null!=te(e,t)})}function ye(e){var t=ne(e,"hx-target");return t?"this"===t?xe(e,"hx-target"):ue(e,t):ae(e).boosted?re().body:e}function be(e){for(var t=Q.config.attributesToSettle,r=0;r<t.length;r++)if(e===t[r])return!0;return!1}function we(e,t){oe(e.attributes,function(r){!t.hasAttribute(r.name)&&be(r.name)&&e.removeAttribute(r.name)}),oe(t.attributes,function(t){be(t.name)&&e.setAttribute(t.name,t.value)})}function Se(e,t){for(var r=Fr(t),n=0;n<r.length;n++){var i=r[n];try{if(i.isInlineSwap(e))return!0}catch(e){b(e)}}return"outerHTML"===e}function Ee(e,t,r){var n="#"+ee(t,"id"),i="outerHTML";"true"===e||(e.indexOf(":")>0?(i=e.substr(0,e.indexOf(":")),n=e.substr(e.indexOf(":")+1,e.length)):i=e);var o=re().querySelectorAll(n);return o?(oe(o,function(e){var n,o=t.cloneNode(!0);(n=re().createDocumentFragment()).appendChild(o),Se(i,e)||(n=o);var a={shouldSwap:!0,target:e,fragment:n};ce(e,"htmx:oobBeforeSwap",a)&&(e=a.target,a.shouldSwap&&Fe(i,e,e,n,r),oe(r.elts,function(e){ce(e,"htmx:oobAfterSwap",a)}))}),t.parentNode.removeChild(t)):(t.parentNode.removeChild(t),fe(re().body,"htmx:oobErrorNoTarget",{content:t})),e}function Ce(e,t,r){var n=ne(e,"hx-select-oob");if(n)for(var i=n.split(","),o=0;o<i.length;o++){var a=i[o].split(":",2),s=a[0].trim();0===s.indexOf("#")&&(s=s.substring(1));var u=a[1]||"true",l=t.querySelector("#"+s);l&&Ee(u,l,r)}oe(f(t,"[hx-swap-oob], [data-hx-swap-oob]"),function(e){var t=te(e,"hx-swap-oob");null!=t&&Ee(t,e,r)})}function Re(e){oe(f(e,"[hx-preserve], [data-hx-preserve]"),function(e){var t=te(e,"id"),r=re().getElementById(t);null!=r&&e.parentNode.replaceChild(r,e)})}function Te(e,t,r){oe(t.querySelectorAll("[id]"),function(t){var n=ee(t,"id");if(n&&n.length>0){var i=n.replace("'","\\'"),o=t.tagName.replace(":","\\:"),a=e.querySelector(o+"[id='"+i+"']");if(a&&a!==e){var s=t.cloneNode();we(t,a),r.tasks.push(function(){we(t,s)})}}})}function Oe(e){return function(){n(e,Q.config.addedClass),zt(e),Nt(e),qe(e),ce(e,"htmx:load")}}function qe(e){var t="[autofocus]",r=h(e,t)?e:e.querySelector(t);null!=r&&r.focus()}function m(e,t,r,n){for(Te(e,r,n);r.childNodes.length>0;){var i=r.firstChild;z(i,Q.config.addedClass),e.insertBefore(i,t),i.nodeType!==Node.TEXT_NODE&&i.nodeType!==Node.COMMENT_NODE&&n.tasks.push(Oe(i))}}function He(e,t){for(var r=0;r<e.length;)t=(t<<5)-t+e.charCodeAt(r++)|0;return t}function Le(e){var t=0;if(e.attributes)for(var r=0;r<e.attributes.length;r++){var n=e.attributes[r];n.value&&(t=He(n.name,t),t=He(n.value,t))}return t}function Ae(e){var t=ae(e);if(t.onHandlers){for(var r=0;r<t.onHandlers.length;r++){let n=t.onHandlers[r];e.removeEventListener(n.event,n.listener)}delete t.onHandlers}}function Ne(e){var t=ae(e);t.timeout&&clearTimeout(t.timeout),t.webSocket&&t.webSocket.close(),t.sseEventSource&&t.sseEventSource.close(),t.listenerInfos&&oe(t.listenerInfos,function(e){e.on&&e.on.removeEventListener(e.trigger,e.listener)}),Ae(e),oe(Object.keys(t),function(e){delete t[e]})}function p(e){ce(e,"htmx:beforeCleanupElement"),Ne(e),e.children&&oe(e.children,function(e){p(e)})}function Ie(e,t,r){if("BODY"===e.tagName)return Ue(e,t,r);var n,i=e.previousSibling;for(m(u(e),e,t,r),n=null==i?u(e).firstChild:i.nextSibling,r.elts=r.elts.filter(function(t){return t!=e});n&&n!==e;)n.nodeType===Node.ELEMENT_NODE&&r.elts.push(n),n=n.nextElementSibling;p(e),u(e).removeChild(e)}function ke(e,t,r){return m(e,e.firstChild,t,r)}function Pe(e,t,r){return m(u(e),e,t,r)}function Me(e,t,r){return m(e,null,t,r)}function Xe(e,t,r){return m(u(e),e.nextSibling,t,r)}function De(e,t,r){return p(e),u(e).removeChild(e)}function Ue(e,t,r){var n=e.firstChild;if(m(e,n,t,r),n){for(;n.nextSibling;)p(n.nextSibling),e.removeChild(n.nextSibling);p(n),e.removeChild(n)}}function Be(e,t,r){var n=r||ne(e,"hx-select");if(n){var i=re().createDocumentFragment();oe(t.querySelectorAll(n),function(e){i.appendChild(e)}),t=i}return t}function Fe(e,t,r,n,i){switch(e){case"none":return;case"outerHTML":Ie(r,n,i);return;case"afterbegin":ke(r,n,i);return;case"beforebegin":Pe(r,n,i);return;case"beforeend":Me(r,n,i);return;case"afterend":Xe(r,n,i);return;case"delete":De(r,n,i);return;default:for(var o=Fr(t),a=0;a<o.length;a++){var s=o[a];try{var u=s.handleSwap(e,r,n,i);if(u){if(void 0!==u.length)for(var l=0;l<u.length;l++){var c=u[l];c.nodeType!==Node.TEXT_NODE&&c.nodeType!==Node.COMMENT_NODE&&i.tasks.push(Oe(c))}return}}catch(e){b(e)}}"innerHTML"===e?Ue(r,n,i):Fe(Q.config.defaultSwapStyle,t,r,n,i)}}function Ve(e){if(e.indexOf("<title")>-1){var t=e.replace(H,"").match(q);if(t)return t[2]}}function je(e,t,r,n,i,o){i.title=Ve(n);var a=l(n);if(a)return Ce(r,a,i),Re(a=Be(r,a,o)),Fe(e,r,t,a,i)}function _e(e,t,r){var n=e.getResponseHeader(t);if(0===n.indexOf("{")){var i=E(n);for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];P(a)||(a={value:a}),ce(r,o,a)}}else for(var s=n.split(","),u=0;u<s.length;u++)ce(r,s[u].trim(),[])}var ze=/\s/,x=/[\s,]/,$e=/[_$a-zA-Z]/,We=/[_$a-zA-Z0-9]/,Ge=['"',"'","/"],Je=/[^\s]/,Ze=/[{(]/,Ke=/[})]/;function Ye(e){for(var t=[],r=0;r<e.length;){if($e.exec(e.charAt(r))){for(var n=r;We.exec(e.charAt(r+1));)r++;t.push(e.substr(n,r-n+1))}else if(-1!==Ge.indexOf(e.charAt(r))){var i=e.charAt(r),n=r;for(r++;r<e.length&&e.charAt(r)!==i;)"\\"===e.charAt(r)&&r++,r++;t.push(e.substr(n,r-n+1))}else{var o=e.charAt(r);t.push(o)}r++}return t}function Qe(e,t,r){return $e.exec(e.charAt(0))&&"true"!==e&&"false"!==e&&"this"!==e&&e!==r&&"."!==t}function et(e,t,r){if("["===t[0]){t.shift();for(var n=1,i=" return (function("+r+"){ return (",o=null;t.length>0;){var a=t[0];if("]"===a){if(0==--n){null===o&&(i+="true"),t.shift(),i+=")})";try{var s=Tr(e,function(){return Function(i)()},function(){return!0});return s.source=i,s}catch(e){return fe(re().body,"htmx:syntax:error",{error:e,source:i}),null}}}else"["===a&&n++;Qe(a,o,r)?i+="(("+r+"."+a+") ? ("+r+"."+a+") : (window."+a+"))":i+=a,o=t.shift()}}}function y(e,t){for(var r="";e.length>0&&!t.test(e[0]);)r+=e.shift();return r}function tt(e){var t;return e.length>0&&Ze.test(e[0])?(e.shift(),t=y(e,Ke).trim(),e.shift()):t=y(e,x),t}var rt="input, textarea, select";function nt(e,t,r){var n=[],i=Ye(t);do{y(i,Je);var o=i.length,a=y(i,/[,\[\s]/);if(""!==a){if("every"===a){var s={trigger:"every"};y(i,Je),s.pollInterval=d(y(i,/[,\[\s]/)),y(i,Je);var u=et(e,i,"event");u&&(s.eventFilter=u),n.push(s)}else if(0===a.indexOf("sse:"))n.push({trigger:"sse",sseEvent:a.substr(4)});else{var l={trigger:a},u=et(e,i,"event");for(u&&(l.eventFilter=u);i.length>0&&","!==i[0];){y(i,Je);var c=i.shift();if("changed"===c)l.changed=!0;else if("once"===c)l.once=!0;else if("consume"===c)l.consume=!0;else if("delay"===c&&":"===i[0])i.shift(),l.delay=d(y(i,x));else if("from"===c&&":"===i[0]){if(i.shift(),Ze.test(i[0]))var f=tt(i);else{var f=y(i,x);if("closest"===f||"find"===f||"next"===f||"previous"===f){i.shift();var m=tt(i);m.length>0&&(f+=" "+m)}}l.from=f}else"target"===c&&":"===i[0]?(i.shift(),l.target=tt(i)):"throttle"===c&&":"===i[0]?(i.shift(),l.throttle=d(y(i,x))):"queue"===c&&":"===i[0]?(i.shift(),l.queue=y(i,x)):"root"===c&&":"===i[0]?(i.shift(),l[c]=tt(i)):"threshold"===c&&":"===i[0]?(i.shift(),l[c]=y(i,x)):fe(e,"htmx:syntax:error",{token:i.shift()})}n.push(l)}}i.length===o&&fe(e,"htmx:syntax:error",{token:i.shift()}),y(i,Je)}while(","===i[0]&&i.shift())return r&&(r[t]=n),n}function it(e){var t=te(e,"hx-trigger"),r=[];if(t){var n=Q.config.triggerSpecsCache;r=n&&n[t]||nt(e,t,n)}return r.length>0?r:h(e,"form")?[{trigger:"submit"}]:h(e,'input[type="button"], input[type="submit"]')?[{trigger:"click"}]:h(e,rt)?[{trigger:"change"}]:[{trigger:"click"}]}function at(e){ae(e).cancelled=!0}function ot(e,t,r){var n=ae(e);n.timeout=setTimeout(function(){se(e)&&!0!==n.cancelled&&(ct(r,e,Wt("hx:poll:trigger",{triggerSpec:r,target:e}))||t(e),ot(e,t,r))},r.pollInterval)}function st(e){return location.hostname===e.hostname&&ee(e,"href")&&0!==ee(e,"href").indexOf("#")}function lt(e,t,r){if("A"===e.tagName&&st(e)&&(""===e.target||"_self"===e.target)||"FORM"===e.tagName){if(t.boosted=!0,"A"===e.tagName)n="get",i=ee(e,"href");else{var n,i,o=ee(e,"method");n=o?o.toLowerCase():"get",i=ee(e,"action")}r.forEach(function(r){ht(e,function(e,t){if(v(e,Q.config.disableSelector)){p(e);return}he(n,i,e,t)},t,r,!0)})}}function ut(e,t){return!!(("submit"===e.type||"click"===e.type)&&("FORM"===t.tagName||h(t,'input[type="submit"], button')&&null!==v(t,"form")||"A"===t.tagName&&t.href&&("#"===t.getAttribute("href")||0!==t.getAttribute("href").indexOf("#"))))}function ft(e,t){return ae(e).boosted&&"A"===e.tagName&&"click"===t.type&&(t.ctrlKey||t.metaKey)}function ct(e,t,r){var n=e.eventFilter;if(n)try{return!0!==n.call(t,r)}catch(e){return fe(re().body,"htmx:eventFilter:error",{error:e,source:n.source}),!0}return!1}function ht(e,t,r,n,i){var o,a=ae(e);o=n.from?Z(e,n.from):[e],n.changed&&o.forEach(function(e){ae(e).lastValue=e.value}),oe(o,function(o){var s=function(r){if(!se(e)){o.removeEventListener(n.trigger,s);return}if(!ft(e,r)&&((i||ut(r,e))&&r.preventDefault(),!ct(n,e,r))){var u=ae(r);if(u.triggerSpec=n,null==u.handledFor&&(u.handledFor=[]),0>u.handledFor.indexOf(e)){if(u.handledFor.push(e),n.consume&&r.stopPropagation(),n.target&&r.target&&!h(r.target,n.target))return;if(n.once){if(a.triggeredOnce)return;a.triggeredOnce=!0}if(n.changed){var l=ae(o);if(l.lastValue===o.value)return;l.lastValue=o.value}if(a.delayed&&clearTimeout(a.delayed),a.throttle)return;n.throttle>0?a.throttle||(t(e,r),a.throttle=setTimeout(function(){a.throttle=null},n.throttle)):n.delay>0?a.delayed=setTimeout(function(){t(e,r)},n.delay):(ce(e,"htmx:trigger"),t(e,r))}}};null==r.listenerInfos&&(r.listenerInfos=[]),r.listenerInfos.push({trigger:n.trigger,listener:s,on:o}),o.addEventListener(n.trigger,s)})}var vt=!1,dt=null;function gt(){dt||(dt=function(){vt=!0},window.addEventListener("scroll",dt),setInterval(function(){vt&&(vt=!1,oe(re().querySelectorAll("[hx-trigger='revealed'],[data-hx-trigger='revealed']"),function(e){mt(e)}))},200))}function mt(e){!o(e,"data-hx-revealed")&&X(e)&&(e.setAttribute("data-hx-revealed","true"),ae(e).initHash?ce(e,"revealed"):e.addEventListener("htmx:afterProcessNode",function(t){ce(e,"revealed")},{once:!0}))}function pt(e,t,r){for(var n=D(r),i=0;i<n.length;i++){var o=n[i].split(/:(.+)/);"connect"===o[0]&&xt(e,o[1],0),"send"===o[0]&&bt(e)}}function xt(e,t,r){if(se(e)){if(0==t.indexOf("/")){var n=location.hostname+(location.port?":"+location.port:"");"https:"==location.protocol?t="wss://"+n+t:"http:"==location.protocol&&(t="ws://"+n+t)}var i=Q.createWebSocket(t);i.onerror=function(t){fe(e,"htmx:wsError",{error:t,socket:i}),yt(e)},i.onclose=function(n){[1006,1012,1013].indexOf(n.code)>=0&&setTimeout(function(){xt(e,t,r+1)},wt(r))},i.onopen=function(e){r=0},ae(e).webSocket=i,i.addEventListener("message",function(t){if(!yt(e)){var r=t.data;R(e,function(t){r=t.transformResponse(r,null,e)});for(var n=T(e),i=l(r),o=M(i.children),a=0;a<o.length;a++){var s=o[a];Ee(te(s,"hx-swap-oob")||"true",s,n)}nr(n.tasks)}})}}function yt(e){if(!se(e))return ae(e).webSocket.close(),!0}function bt(e){var t=c(e,function(e){return null!=ae(e).webSocket});t?e.addEventListener(it(e)[0].trigger,function(r){var n=ae(t).webSocket,i=xr(e,t),o=dr(e,"post"),a=o.errors,s=yr(le(o.values,Hr(e)),e);if(s.HEADERS=i,a&&a.length>0){ce(e,"htmx:validation:halted",a);return}n.send(JSON.stringify(s)),ut(r,e)&&r.preventDefault()}):fe(e,"htmx:noWebSocketSourceError")}function wt(e){var t=Q.config.wsReconnectDelay;return"function"==typeof t?t(e):"full-jitter"===t?1e3*Math.pow(2,Math.min(e,6))*Math.random():void b('htmx.config.wsReconnectDelay must either be a function or the string "full-jitter"')}function St(e,t,r){for(var n=D(r),i=0;i<n.length;i++){var o=n[i].split(/:(.+)/);"connect"===o[0]&&Et(e,o[1]),"swap"===o[0]&&Ct(e,o[1])}}function Et(e,t){var r=Q.createEventSource(t);r.onerror=function(t){fe(e,"htmx:sseError",{error:t,source:r}),Tt(e)},ae(e).sseEventSource=r}function Ct(e,t){var r=c(e,Ot);if(r){var n=ae(r).sseEventSource,i=function(o){if(!Tt(r)){if(!se(e)){n.removeEventListener(t,i);return}var a=o.data;R(e,function(t){a=t.transformResponse(a,null,e)});var s=wr(e),u=ye(e),l=T(e);je(s.swapStyle,u,e,a,l),nr(l.tasks),ce(e,"htmx:sseMessage",o)}};ae(e).sseListener=i,n.addEventListener(t,i)}else fe(e,"htmx:noSSESourceError")}function Rt(e,t,r){var n=c(e,Ot);if(n){var i=ae(n).sseEventSource,o=function(){Tt(n)||(se(e)?t(e):i.removeEventListener(r,o))};ae(e).sseListener=o,i.addEventListener(r,o)}else fe(e,"htmx:noSSESourceError")}function Tt(e){if(!se(e))return ae(e).sseEventSource.close(),!0}function Ot(e){return null!=ae(e).sseEventSource}function qt(e,t,r,n){var i=function(){r.loaded||(r.loaded=!0,t(e))};n>0?setTimeout(i,n):i()}function Ht(e,t,r){var n=!1;return oe(w,function(i){if(o(e,"hx-"+i)){var a=te(e,"hx-"+i);n=!0,t.path=a,t.verb=i,r.forEach(function(r){Lt(e,r,t,function(e,t){if(v(e,Q.config.disableSelector)){p(e);return}he(i,a,e,t)})})}}),n}function Lt(e,t,r,n){if(t.sseEvent)Rt(e,n,t.sseEvent);else if("revealed"===t.trigger)gt(),ht(e,n,r,t),mt(e);else if("intersect"===t.trigger){var i={};t.root&&(i.root=ue(e,t.root)),t.threshold&&(i.threshold=parseFloat(t.threshold)),new IntersectionObserver(function(t){for(var r=0;r<t.length;r++)if(t[r].isIntersecting){ce(e,"intersect");break}},i).observe(e),ht(e,n,r,t)}else"load"===t.trigger?ct(t,e,Wt("load",{elt:e}))||qt(e,n,r,t.delay):t.pollInterval>0?(r.polling=!0,ot(e,n,t)):ht(e,n,r,t)}function At(e){if(Q.config.allowScriptTags&&("text/javascript"===e.type||"module"===e.type||""===e.type)){var t=re().createElement("script");oe(e.attributes,function(e){t.setAttribute(e.name,e.value)}),t.textContent=e.textContent,t.async=!1,Q.config.inlineScriptNonce&&(t.nonce=Q.config.inlineScriptNonce);var r=e.parentElement;try{r.insertBefore(t,e)}catch(e){b(e)}finally{e.parentElement&&e.parentElement.removeChild(e)}}}function Nt(e){h(e,"script")&&At(e),oe(f(e,"script"),function(e){At(e)})}function It(e){for(var t=e.attributes,r=0;r<t.length;r++){var n=t[r].name;if(s(n,"hx-on:")||s(n,"data-hx-on:")||s(n,"hx-on-")||s(n,"data-hx-on-"))return!0}return!1}function kt(e){var t=null,r=[];if(It(e)&&r.push(e),document.evaluate)for(var n=document.evaluate('.//*[@*[ starts-with(name(), "hx-on:") or starts-with(name(), "data-hx-on:") or starts-with(name(), "hx-on-") or starts-with(name(), "data-hx-on-") ]]',e);t=n.iterateNext();)r.push(t);else for(var i=e.getElementsByTagName("*"),o=0;o<i.length;o++)It(i[o])&&r.push(i[o]);return r}function Pt(e){if(!e.querySelectorAll)return[];var t=", [hx-boost] a, [data-hx-boost] a, a[hx-boost], a[data-hx-boost]";return e.querySelectorAll(i+t+", form, [type='submit'], [hx-sse], [data-hx-sse], [hx-ws], [data-hx-ws], [hx-ext], [data-hx-ext], [hx-trigger], [data-hx-trigger], [hx-on], [data-hx-on]")}function Mt(e){var t=v(e.target,"button, input[type='submit']"),r=Dt(e);r&&(r.lastButtonClicked=t)}function Xt(e){var t=Dt(e);t&&(t.lastButtonClicked=null)}function Dt(e){var t=v(e.target,"button, input[type='submit']");if(t){var r=g("#"+ee(t,"form"))||v(t,"form");if(r)return ae(r)}}function Ut(e){e.addEventListener("click",Mt),e.addEventListener("focusin",Mt),e.addEventListener("focusout",Xt)}function Bt(e){for(var t=Ye(e),r=0,n=0;n<t.length;n++){let e=t[n];"{"===e?r++:"}"===e&&r--}return r}function Ft(e,t,r){var n,i=ae(e);Array.isArray(i.onHandlers)||(i.onHandlers=[]);var o=function(t){return Tr(e,function(){n||(n=Function("event",r)),n.call(e,t)})};e.addEventListener(t,o),i.onHandlers.push({event:t,listener:o})}function Vt(e){var t=te(e,"hx-on");if(t){for(var r={},n=t.split("\n"),i=null,o=0;n.length>0;){var a=n.shift(),s=a.match(/^\s*([a-zA-Z:\-\.]+:)(.*)/);0===o&&s?(a.split(":"),r[i=s[1].slice(0,-1)]=s[2]):r[i]+=a,o+=Bt(a)}for(var u in r)Ft(e,u,r[u])}}function jt(e){Ae(e);for(var t=0;t<e.attributes.length;t++){var r=e.attributes[t].name,n=e.attributes[t].value;if(s(r,"hx-on")||s(r,"data-hx-on")){var i=r.indexOf("-on")+3,o=r.slice(i,i+1);if("-"===o||":"===o){var a=r.slice(i+1);s(a,":")?a="htmx"+a:s(a,"-")?a="htmx:"+a.slice(1):s(a,"htmx-")&&(a="htmx:"+a.slice(5)),Ft(e,a,n)}}}}function _t(e){if(v(e,Q.config.disableSelector)){p(e);return}var t=ae(e);if(t.initHash!==Le(e)){Ne(e),t.initHash=Le(e),Vt(e),ce(e,"htmx:beforeProcessNode"),e.value&&(t.lastValue=e.value);var r=it(e);!Ht(e,t,r)&&("true"===ne(e,"hx-boost")?lt(e,t,r):o(e,"hx-trigger")&&r.forEach(function(r){Lt(e,r,t,function(){})})),("FORM"===e.tagName||"submit"===ee(e,"type")&&o(e,"form"))&&Ut(e);var n=te(e,"hx-sse");n&&St(e,t,n);var i=te(e,"hx-ws");i&&pt(e,t,i),ce(e,"htmx:afterProcessNode")}}function zt(e){if(v(e=g(e),Q.config.disableSelector)){p(e);return}_t(e),oe(Pt(e),function(e){_t(e)}),oe(kt(e),jt)}function $t(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}function Wt(e,t){var r;return window.CustomEvent&&"function"==typeof window.CustomEvent?r=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t}):(r=re().createEvent("CustomEvent")).initCustomEvent(e,!0,!0,t),r}function fe(e,t,r){ce(e,t,le({error:t},r))}function Gt(e){return"htmx:afterProcessNode"===e}function R(e,t){oe(Fr(e),function(e){try{t(e)}catch(e){b(e)}})}function b(e){console.error?console.error(e):console.log&&console.log("ERROR: ",e)}function ce(e,t,r){e=g(e),null==r&&(r={}),r.elt=e;var n=Wt(t,r);Q.logger&&!Gt(t)&&Q.logger(e,t,r),r.error&&(b(r.error),ce(e,"htmx:error",{errorInfo:r}));var i=e.dispatchEvent(n),o=$t(t);if(i&&o!==t){var a=Wt(o,n.detail);i=i&&e.dispatchEvent(a)}return R(e,function(e){i=i&&!1!==e.onEvent(t,n)&&!n.defaultPrevented}),i}var Jt=location.pathname+location.search;function Zt(){return re().querySelector("[hx-history-elt],[data-hx-history-elt]")||re().body}function Kt(e,t,r,n){if(U()){if(Q.config.historyCacheSize<=0){localStorage.removeItem("htmx-history-cache");return}e=B(e);for(var i=E(localStorage.getItem("htmx-history-cache"))||[],o=0;o<i.length;o++)if(i[o].url===e){i.splice(o,1);break}var a={url:e,content:t,title:r,scroll:n};for(ce(re().body,"htmx:historyItemCreated",{item:a,cache:i}),i.push(a);i.length>Q.config.historyCacheSize;)i.shift();for(;i.length>0;)try{localStorage.setItem("htmx-history-cache",JSON.stringify(i));break}catch(e){fe(re().body,"htmx:historyCacheError",{cause:e,cache:i}),i.shift()}}}function Yt(e){if(!U())return null;e=B(e);for(var t=E(localStorage.getItem("htmx-history-cache"))||[],r=0;r<t.length;r++)if(t[r].url===e)return t[r];return null}function Qt(e){var t=Q.config.requestClass,r=e.cloneNode(!0);return oe(f(r,"."+t),function(e){n(e,t)}),r.innerHTML}function er(){var e,t=Zt(),r=Jt||location.pathname+location.search;try{e=re().querySelector('[hx-history="false" i],[data-hx-history="false" i]')}catch(t){e=re().querySelector('[hx-history="false"],[data-hx-history="false"]')}e||(ce(re().body,"htmx:beforeHistorySave",{path:r,historyElt:t}),Kt(r,Qt(t),re().title,window.scrollY)),Q.config.historyEnabled&&history.replaceState({htmx:!0},re().title,window.location.href)}function tr(e){Q.config.getCacheBusterParam&&(G(e=e.replace(/org\.htmx\.cache-buster=[^&]*&?/,""),"&")||G(e,"?"))&&(e=e.slice(0,-1)),Q.config.historyEnabled&&history.pushState({htmx:!0},"",e),Jt=e}function rr(e){Q.config.historyEnabled&&history.replaceState({htmx:!0},"",e),Jt=e}function nr(e){oe(e,function(e){e.call()})}function ir(e){var t=new XMLHttpRequest,r={path:e,xhr:t};ce(re().body,"htmx:historyCacheMiss",r),t.open("GET",e,!0),t.setRequestHeader("HX-Request","true"),t.setRequestHeader("HX-History-Restore-Request","true"),t.setRequestHeader("HX-Current-URL",re().location.href),t.onload=function(){if(this.status>=200&&this.status<400){ce(re().body,"htmx:historyCacheMissLoad",r);var t=l(this.response);t=t.querySelector("[hx-history-elt],[data-hx-history-elt]")||t;var n=Zt(),i=T(n),o=Ve(this.response);if(o){var a=C("title");a?a.innerHTML=o:window.document.title=o}Ue(n,t,i),nr(i.tasks),Jt=e,ce(re().body,"htmx:historyRestore",{path:e,cacheMiss:!0,serverResponse:this.response})}else fe(re().body,"htmx:historyCacheMissLoadError",r)},t.send()}function ar(e){er();var t=Yt(e=e||location.pathname+location.search);if(t){var r=l(t.content),n=Zt(),i=T(n);Ue(n,r,i),nr(i.tasks),document.title=t.title,setTimeout(function(){window.scrollTo(0,t.scroll)},0),Jt=e,ce(re().body,"htmx:historyRestore",{path:e,item:t})}else Q.config.refreshOnHistoryMiss?window.location.reload(!0):ir(e)}function or(e){var t=pe(e,"hx-indicator");return null==t&&(t=[e]),oe(t,function(e){var t=ae(e);t.requestCount=(t.requestCount||0)+1,e.classList.add.call(e.classList,Q.config.requestClass)}),t}function sr(e){var t=pe(e,"hx-disabled-elt");return null==t&&(t=[]),oe(t,function(e){var t=ae(e);t.requestCount=(t.requestCount||0)+1,e.setAttribute("disabled","")}),t}function lr(e,t){oe(e,function(e){var t=ae(e);t.requestCount=(t.requestCount||0)-1,0===t.requestCount&&e.classList.remove.call(e.classList,Q.config.requestClass)}),oe(t,function(e){var t=ae(e);t.requestCount=(t.requestCount||0)-1,0===t.requestCount&&e.removeAttribute("disabled")})}function ur(e,t){for(var r=0;r<e.length;r++)if(e[r].isSameNode(t))return!0;return!1}function fr(e){return!(""===e.name||null==e.name||e.disabled||v(e,"fieldset[disabled]"))&&"button"!==e.type&&"submit"!==e.type&&"image"!==e.tagName&&"reset"!==e.tagName&&"file"!==e.tagName&&("checkbox"!==e.type&&"radio"!==e.type||e.checked)}function cr(e,t,r){if(null!=e&&null!=t){var n=r[e];void 0===n?r[e]=t:Array.isArray(n)?Array.isArray(t)?r[e]=n.concat(t):n.push(t):Array.isArray(t)?r[e]=[n].concat(t):r[e]=[n,t]}}function hr(e,t,r,n,i){if(!(null==n||ur(e,n))){if(e.push(n),fr(n)){var o=ee(n,"name"),a=n.value;n.multiple&&"SELECT"===n.tagName&&(a=M(n.querySelectorAll("option:checked")).map(function(e){return e.value})),n.files&&(a=M(n.files)),cr(o,a,t),i&&vr(n,r)}h(n,"form")&&oe(n.elements,function(n){hr(e,t,r,n,i)})}}function vr(e,t){e.willValidate&&(ce(e,"htmx:validation:validate"),e.checkValidity()||(t.push({elt:e,message:e.validationMessage,validity:e.validity}),ce(e,"htmx:validation:failed",{message:e.validationMessage,validity:e.validity})))}function dr(e,t){var r=[],n={},i={},o=[],a=ae(e);a.lastButtonClicked&&!se(a.lastButtonClicked)&&(a.lastButtonClicked=null);var s=h(e,"form")&&!0!==e.noValidate||"true"===te(e,"hx-validate");if(a.lastButtonClicked&&(s=s&&!0!==a.lastButtonClicked.formNoValidate),"get"!==t&&hr(r,i,o,v(e,"form"),s),hr(r,n,o,e,s),a.lastButtonClicked||"BUTTON"===e.tagName||"INPUT"===e.tagName&&"submit"===ee(e,"type")){var u=a.lastButtonClicked||e;cr(ee(u,"name"),u.value,i)}return oe(pe(e,"hx-include"),function(e){hr(r,n,o,e,s),h(e,"form")||oe(e.querySelectorAll(rt),function(e){hr(r,n,o,e,s)})}),{errors:o,values:n=le(n,i)}}function gr(e,t,r){""!==e&&(e+="&"),"[object Object]"===String(r)&&(r=JSON.stringify(r));var n=encodeURIComponent(r);return e+(encodeURIComponent(t)+"=")+n}function mr(e){var t="";for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];Array.isArray(n)?oe(n,function(e){t=gr(t,r,e)}):t=gr(t,r,n)}return t}function pr(e){var t=new FormData;for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];Array.isArray(n)?oe(n,function(e){t.append(r,e)}):t.append(r,n)}return t}function xr(e,t,r){var n={"HX-Request":"true","HX-Trigger":ee(e,"id"),"HX-Trigger-Name":ee(e,"name"),"HX-Target":te(t,"id"),"HX-Current-URL":re().location.href};return Rr(e,"hx-headers",!1,n),void 0!==r&&(n["HX-Prompt"]=r),ae(e).boosted&&(n["HX-Boosted"]="true"),n}function yr(e,t){var r=ne(t,"hx-params");if(!r)return e;if("none"===r)return{};if("*"===r)return e;if(0===r.indexOf("not "))return oe(r.substr(4).split(","),function(t){t=t.trim(),delete e[t]}),e;var n={};return oe(r.split(","),function(t){n[t=t.trim()]=e[t]}),n}function br(e){return ee(e,"href")&&ee(e,"href").indexOf("#")>=0}function wr(e,t){var r=t||ne(e,"hx-swap"),n={swapStyle:ae(e).boosted?"innerHTML":Q.config.defaultSwapStyle,swapDelay:Q.config.defaultSwapDelay,settleDelay:Q.config.defaultSettleDelay};if(Q.config.scrollIntoViewOnBoost&&ae(e).boosted&&!br(e)&&(n.show="top"),r){var i=D(r);if(i.length>0)for(var o=0;o<i.length;o++){var a=i[o];if(0===a.indexOf("swap:"))n.swapDelay=d(a.substr(5));else if(0===a.indexOf("settle:"))n.settleDelay=d(a.substr(7));else if(0===a.indexOf("transition:"))n.transition="true"===a.substr(11);else if(0===a.indexOf("ignoreTitle:"))n.ignoreTitle="true"===a.substr(12);else if(0===a.indexOf("scroll:")){var s=a.substr(7).split(":"),u=s.pop(),l=s.length>0?s.join(":"):null;n.scroll=u,n.scrollTarget=l}else if(0===a.indexOf("show:")){var s=a.substr(5).split(":"),c=s.pop(),l=s.length>0?s.join(":"):null;n.show=c,n.showTarget=l}else if(0===a.indexOf("focus-scroll:")){var f=a.substr(13);n.focusScroll="true"==f}else 0==o?n.swapStyle=a:b("Unknown modifier in hx-swap: "+a)}}return n}function Sr(e){return"multipart/form-data"===ne(e,"hx-encoding")||h(e,"form")&&"multipart/form-data"===ee(e,"enctype")}function Er(e,t,r){var n=null;return(R(t,function(i){null==n&&(n=i.encodeParameters(e,r,t))}),null!=n)?n:Sr(t)?pr(r):mr(r)}function T(e){return{tasks:[],elts:[e]}}function Cr(e,t){var r=e[0],n=e[e.length-1];if(t.scroll){var i=null;t.scrollTarget&&(i=ue(r,t.scrollTarget)),"top"===t.scroll&&(r||i)&&((i=i||r).scrollTop=0),"bottom"===t.scroll&&(n||i)&&((i=i||n).scrollTop=i.scrollHeight)}if(t.show){var i=null;if(t.showTarget){var o=t.showTarget;"window"===t.showTarget&&(o="body"),i=ue(r,o)}"top"===t.show&&(r||i)&&(i=i||r).scrollIntoView({block:"start",behavior:Q.config.scrollBehavior}),"bottom"===t.show&&(n||i)&&(i=i||n).scrollIntoView({block:"end",behavior:Q.config.scrollBehavior})}}function Rr(e,t,r,n){if(null==n&&(n={}),null==e)return n;var i=te(e,t);if(i){var o,a=i.trim(),s=r;if("unset"===a)return null;for(var l in 0===a.indexOf("javascript:")?(a=a.substr(11),s=!0):0===a.indexOf("js:")&&(a=a.substr(3),s=!0),0!==a.indexOf("{")&&(a="{"+a+"}"),o=s?Tr(e,function(){return Function("return ("+a+")")()},{}):E(a))o.hasOwnProperty(l)&&null==n[l]&&(n[l]=o[l])}return Rr(u(e),t,r,n)}function Tr(e,t,r){return Q.config.allowEval?t():(fe(e,"htmx:evalDisallowedError"),r)}function Or(e,t){return Rr(e,"hx-vars",!0,t)}function qr(e,t){return Rr(e,"hx-vals",!1,t)}function Hr(e){return le(Or(e),qr(e))}function Lr(e,t,r){if(null!==r)try{e.setRequestHeader(t,r)}catch(n){e.setRequestHeader(t,encodeURIComponent(r)),e.setRequestHeader(t+"-URI-AutoEncoded","true")}}function Ar(e){if(e.responseURL&&"undefined"!=typeof URL)try{var t=new URL(e.responseURL);return t.pathname+t.search}catch(t){fe(re().body,"htmx:badResponseUrl",{url:e.responseURL})}}function O(e,t){return t.test(e.getAllResponseHeaders())}function Nr(e,t,r){return(e=e.toLowerCase(),r)?r instanceof Element||I(r,"String")?he(e,t,null,null,{targetOverride:g(r),returnPromise:!0}):he(e,t,g(r.source),r.event,{handler:r.handler,headers:r.headers,values:r.values,targetOverride:g(r.target),swapOverride:r.swap,select:r.select,returnPromise:!0}):he(e,t,null,null,{returnPromise:!0})}function Ir(e){for(var t=[];e;)t.push(e),e=e.parentElement;return t}function kr(e,t,r){if("function"==typeof URL){var n,i;i=new URL(t,document.location.href),n=document.location.origin===i.origin}else i=t,n=s(t,document.location.origin);return(!Q.config.selfRequestsOnly||!!n)&&ce(e,"htmx:validateUrl",le({url:i,sameHost:n},r))}function he(e,t,r,n,i,o){var a=null,s=null;if((i=null!=i?i:{}).returnPromise&&"undefined"!=typeof Promise)var u=new Promise(function(e,t){a=e,s=t});null==r&&(r=re().body);var l=i.handler||Mr,c=i.select||null;if(!se(r))return ie(a),u;var f=i.targetOverride||ye(r);if(null==f||f==me)return fe(r,"htmx:targetError",{target:te(r,"hx-target")}),ie(s),u;var m=ae(r),h=m.lastButtonClicked;if(h){var p=ee(h,"formaction");null!=p&&(t=p);var d=ee(h,"formmethod");null!=d&&"dialog"!==d.toLowerCase()&&(e=d)}var v=ne(r,"hx-confirm");if(void 0===o){var g=function(o){return he(e,t,r,n,i,!!o)},E={target:f,elt:r,path:t,verb:e,triggeringEvent:n,etc:i,issueRequest:g,question:v};if(!1===ce(r,"htmx:confirm",E))return ie(a),u}var y=r,T=ne(r,"hx-sync"),x=null,k=!1;if(T){var b=T.split(":"),S=b[0].trim();if(y="this"===S?xe(r,"hx-sync"):ue(r,S),T=(b[1]||"drop").trim(),m=ae(y),"drop"===T&&m.xhr&&!0!==m.abortable)return ie(a),u;if("abort"===T){if(m.xhr)return ie(a),u;k=!0}else"replace"===T?ce(y,"htmx:abort"):0===T.indexOf("queue")&&(x=(T.split(" ")[1]||"last").trim())}if(m.xhr){if(m.abortable)ce(y,"htmx:abort");else{if(null==x){if(n){var w=ae(n);w&&w.triggerSpec&&w.triggerSpec.queue&&(x=w.triggerSpec.queue)}null==x&&(x="last")}return null==m.queuedRequests&&(m.queuedRequests=[]),"first"===x&&0===m.queuedRequests.length?m.queuedRequests.push(function(){he(e,t,r,n,i)}):"all"===x?m.queuedRequests.push(function(){he(e,t,r,n,i)}):"last"===x&&(m.queuedRequests=[],m.queuedRequests.push(function(){he(e,t,r,n,i)})),ie(a),u}}var q=new XMLHttpRequest;m.xhr=q,m.abortable=k;var C=function(){m.xhr=null,m.abortable=!1,null!=m.queuedRequests&&m.queuedRequests.length>0&&m.queuedRequests.shift()()},N=ne(r,"hx-prompt");if(N){var R=prompt(N);if(null===R||!ce(r,"htmx:prompt",{prompt:R,target:f}))return ie(a),C(),u}if(v&&!o&&!confirm(v))return ie(a),C(),u;var O=xr(r,f,R);"get"===e||Sr(r)||(O["Content-Type"]="application/x-www-form-urlencoded"),i.headers&&(O=le(O,i.headers));var A=dr(r,e),I=A.errors,L=A.values;i.values&&(L=le(L,i.values));var F=le(L,Hr(r)),P=yr(F,r);Q.config.getCacheBusterParam&&"get"===e&&(P["org.htmx.cache-buster"]=ee(f,"id")||"true"),(null==t||""===t)&&(t=re().location.href);var M=Rr(r,"hx-request"),H=ae(r).boosted,D=Q.config.methodsThatUseUrlParams.indexOf(e)>=0,_={boosted:H,useUrlParams:D,parameters:P,unfilteredParameters:F,headers:O,target:f,verb:e,errors:I,withCredentials:i.credentials||M.credentials||Q.config.withCredentials,timeout:i.timeout||M.timeout||Q.config.timeout,path:t,triggeringEvent:n};if(!ce(r,"htmx:configRequest",_))return ie(a),C(),u;if(t=_.path,e=_.verb,O=_.headers,P=_.parameters,I=_.errors,D=_.useUrlParams,I&&I.length>0)return ce(r,"htmx:validation:halted",_),ie(a),C(),u;var U=t.split("#"),j=U[0],B=U[1],G=t;if(D&&(G=j,0!==Object.keys(P).length&&(0>G.indexOf("?")?G+="?":G+="&",G+=mr(P),B&&(G+="#"+B))),!kr(r,G,_))return fe(r,"htmx:invalidPath",_),ie(s),u;if(q.open(e.toUpperCase(),G,!0),q.overrideMimeType("text/html"),q.withCredentials=_.withCredentials,q.timeout=_.timeout,M.noHeaders);else for(var V in O)if(O.hasOwnProperty(V)){var W=O[V];Lr(q,V,W)}var X={xhr:q,target:f,requestConfig:_,etc:i,boosted:H,select:c,pathInfo:{requestPath:t,finalRequestPath:G,anchor:B}};if(q.onload=function(){try{var e=Ir(r);if(X.pathInfo.responsePath=Ar(q),l(r,X),lr(z,Y),ce(r,"htmx:afterRequest",X),ce(r,"htmx:afterOnLoad",X),!se(r)){for(var t=null;e.length>0&&null==t;){var n=e.shift();se(n)&&(t=n)}t&&(ce(t,"htmx:afterRequest",X),ce(t,"htmx:afterOnLoad",X))}ie(a),C()}catch(e){throw fe(r,"htmx:onLoadError",le({error:e},X)),e}},q.onerror=function(){lr(z,Y),fe(r,"htmx:afterRequest",X),fe(r,"htmx:sendError",X),ie(s),C()},q.onabort=function(){lr(z,Y),fe(r,"htmx:afterRequest",X),fe(r,"htmx:sendAbort",X),ie(s),C()},q.ontimeout=function(){lr(z,Y),fe(r,"htmx:afterRequest",X),fe(r,"htmx:timeout",X),ie(s),C()},!ce(r,"htmx:beforeRequest",X))return ie(a),C(),u;var z=or(r),Y=sr(r);oe(["loadstart","loadend","progress","abort"],function(e){oe([q,q.upload],function(t){t.addEventListener(e,function(t){ce(r,"htmx:xhr:"+e,{lengthComputable:t.lengthComputable,loaded:t.loaded,total:t.total})})})}),ce(r,"htmx:beforeSend",X);var $=D?null:Er(q,r,P);return q.send($),u}function Pr(e,t){var r=t.xhr,n=null,i=null;if(O(r,/HX-Push:/i)?(n=r.getResponseHeader("HX-Push"),i="push"):O(r,/HX-Push-Url:/i)?(n=r.getResponseHeader("HX-Push-Url"),i="push"):O(r,/HX-Replace-Url:/i)&&(n=r.getResponseHeader("HX-Replace-Url"),i="replace"),n)return"false"===n?{}:{type:i,path:n};var o=t.pathInfo.finalRequestPath,a=t.pathInfo.responsePath,s=ne(e,"hx-push-url"),u=ne(e,"hx-replace-url"),l=ae(e).boosted,c=null,f=null;return(s?(c="push",f=s):u?(c="replace",f=u):l&&(c="push",f=a||o),f)?"false"===f?{}:("true"===f&&(f=a||o),t.pathInfo.anchor&&-1===f.indexOf("#")&&(f=f+"#"+t.pathInfo.anchor),{type:c,path:f}):{}}function Mr(e,t){var r=t.xhr,n=t.target,i=t.etc;t.requestConfig;var o=t.select;if(ce(e,"htmx:beforeOnLoad",t)){if(O(r,/HX-Trigger:/i)&&_e(r,"HX-Trigger",e),O(r,/HX-Location:/i)){er();var a,s=r.getResponseHeader("HX-Location");0===s.indexOf("{")&&(s=(a=E(s)).path,delete a.path),Nr("GET",s,a).then(function(){tr(s)});return}var u=O(r,/HX-Refresh:/i)&&"true"===r.getResponseHeader("HX-Refresh");if(O(r,/HX-Redirect:/i)){location.href=r.getResponseHeader("HX-Redirect"),u&&location.reload();return}if(u){location.reload();return}O(r,/HX-Retarget:/i)&&("this"===r.getResponseHeader("HX-Retarget")?t.target=e:t.target=ue(e,r.getResponseHeader("HX-Retarget")));var l=Pr(e,t),c=r.status>=200&&r.status<400&&204!==r.status,f=r.response,m=r.status>=400,h=Q.config.ignoreTitle,p=le({shouldSwap:c,serverResponse:f,isError:m,ignoreTitle:h},t);if(ce(n,"htmx:beforeSwap",p)){if(n=p.target,f=p.serverResponse,m=p.isError,h=p.ignoreTitle,t.target=n,t.failed=m,t.successful=!m,p.shouldSwap){286===r.status&&at(e),R(e,function(t){f=t.transformResponse(f,r,e)}),l.type&&er();var d=i.swapOverride;O(r,/HX-Reswap:/i)&&(d=r.getResponseHeader("HX-Reswap"));var a=wr(e,d);a.hasOwnProperty("ignoreTitle")&&(h=a.ignoreTitle),n.classList.add(Q.config.swappingClass);var v=null,g=null,y=function(){try{var i,s=document.activeElement,u={};try{u={elt:s,start:s?s.selectionStart:null,end:s?s.selectionEnd:null}}catch(e){}o&&(i=o),O(r,/HX-Reselect:/i)&&(i=r.getResponseHeader("HX-Reselect")),l.type&&(ce(re().body,"htmx:beforeHistoryUpdate",le({history:l},t)),"push"===l.type?(tr(l.path),ce(re().body,"htmx:pushedIntoHistory",{path:l.path})):(rr(l.path),ce(re().body,"htmx:replacedInHistory",{path:l.path})));var c=T(n);if(je(a.swapStyle,n,e,f,c,i),u.elt&&!se(u.elt)&&ee(u.elt,"id")){var m=document.getElementById(ee(u.elt,"id")),p={preventScroll:void 0!==a.focusScroll?!a.focusScroll:!Q.config.defaultFocusScroll};if(m){if(u.start&&m.setSelectionRange)try{m.setSelectionRange(u.start,u.end)}catch(e){}m.focus(p)}}if(n.classList.remove(Q.config.swappingClass),oe(c.elts,function(e){e.classList&&e.classList.add(Q.config.settlingClass),ce(e,"htmx:afterSwap",t)}),O(r,/HX-Trigger-After-Swap:/i)){var d=e;se(e)||(d=re().body),_e(r,"HX-Trigger-After-Swap",d)}var y=function(){if(oe(c.tasks,function(e){e.call()}),oe(c.elts,function(e){e.classList&&e.classList.remove(Q.config.settlingClass),ce(e,"htmx:afterSettle",t)}),t.pathInfo.anchor){var n=re().getElementById(t.pathInfo.anchor);n&&n.scrollIntoView({block:"start",behavior:"auto"})}if(c.title&&!h){var i=C("title");i?i.innerHTML=c.title:window.document.title=c.title}if(Cr(c.elts,a),O(r,/HX-Trigger-After-Settle:/i)){var o=e;se(e)||(o=re().body),_e(r,"HX-Trigger-After-Settle",o)}ie(v)};a.settleDelay>0?setTimeout(y,a.settleDelay):y()}catch(r){throw fe(e,"htmx:swapError",t),ie(g),r}},x=Q.config.globalViewTransitions;if(a.hasOwnProperty("transition")&&(x=a.transition),x&&ce(e,"htmx:beforeTransition",t)&&"undefined"!=typeof Promise&&document.startViewTransition){var k=new Promise(function(e,t){v=e,g=t}),b=y;y=function(){document.startViewTransition(function(){return b(),k})}}a.swapDelay>0?setTimeout(y,a.swapDelay):y()}m&&fe(e,"htmx:responseError",le({error:"Response Status Error Code "+r.status+" from "+t.pathInfo.requestPath},t))}}}var Xr={};function Dr(){return{init:function(e){return null},onEvent:function(e,t){return!0},transformResponse:function(e,t,r){return e},isInlineSwap:function(e){return!1},handleSwap:function(e,t,r,n){return!1},encodeParameters:function(e,t,r){return null}}}function Ur(e,t){t.init&&t.init(r),Xr[e]=le(Dr(),t)}function Br(e){delete Xr[e]}function Fr(e,t,r){if(void 0==e)return t;void 0==t&&(t=[]),void 0==r&&(r=[]);var n=te(e,"hx-ext");return n&&oe(n.split(","),function(e){if("ignore:"==(e=e.replace(/ /g,"")).slice(0,7)){r.push(e.slice(7));return}if(0>r.indexOf(e)){var n=Xr[e];n&&0>t.indexOf(n)&&t.push(n)}}),Fr(u(e),t,r)}var Vr=!1;function jr(e){Vr||"complete"===re().readyState?e():re().addEventListener("DOMContentLoaded",e)}function _r(){!1!==Q.config.includeIndicatorStyles&&re().head.insertAdjacentHTML("beforeend","<style>                      ."+Q.config.indicatorClass+"{opacity:0}                      ."+Q.config.requestClass+" ."+Q.config.indicatorClass+"{opacity:1; transition: opacity 200ms ease-in;}                      ."+Q.config.requestClass+"."+Q.config.indicatorClass+"{opacity:1; transition: opacity 200ms ease-in;}                    </style>")}function zr(){var e=re().querySelector('meta[name="htmx-config"]');return e?E(e.content):null}function $r(){var e=zr();e&&(Q.config=le(Q.config,e))}return re().addEventListener("DOMContentLoaded",function(){Vr=!0}),jr(function(){$r(),_r();var e=re().body;zt(e);var t=re().querySelectorAll("[hx-trigger='restored'],[data-hx-trigger='restored']");e.addEventListener("htmx:abort",function(e){var t=ae(e.target);t&&t.xhr&&t.xhr.abort()});let r=window.onpopstate?window.onpopstate.bind(window):null;window.onpopstate=function(e){e.state&&e.state.htmx?(ar(),oe(t,function(e){ce(e,"htmx:restored",{document:re(),triggerEvent:ce})})):r&&r(e)},setTimeout(function(){ce(e,"htmx:load",{}),e=null},0)}),Q}()})}),parcelRequire("frNQD");var $10c52594aaf0c6b9$exports={};!function(e,t){let r=t(e);"string"!=typeof $10c52594aaf0c6b9$exports.nodeName?$10c52594aaf0c6b9$exports=r:(e._hyperscript=r,"document"in e&&e._hyperscript.browserInit())}("undefined"!=typeof self?self:$10c52594aaf0c6b9$exports,e=>{let t={dynamicResolvers:[function(e,t){if("Fixed"===e)return Number(t).toFixed();if(0===e.indexOf("Fixed:")){let r=e.split(":")[1];return Number(t).toFixed(parseInt(r))}}],String:function(e){return e.toString?e.toString():""+e},Int:function(e){return parseInt(e)},Float:function(e){return parseFloat(e)},Number:function(e){return Number(e)},Date:function(e){return new Date(e)},Array:function(e){return Array.from(e)},JSON:function(e){return JSON.stringify(e)},Object:function(e){return(e instanceof String&&(e=e.toString()),"string"==typeof e)?JSON.parse(e):Object.assign({},e)}},r={attributes:"_, script, data-script",defaultTransition:"all 500ms ease-in",disableSelector:"[disable-scripting], [data-disable-scripting]",hideShowStrategies:{},conversions:t};class n{static OP_TABLE={"+":"PLUS","-":"MINUS","*":"MULTIPLY","/":"DIVIDE",".":"PERIOD","..":"ELLIPSIS","\\":"BACKSLASH",":":"COLON","%":"PERCENT","|":"PIPE","!":"EXCLAMATION","?":"QUESTION","#":"POUND","&":"AMPERSAND",$:"DOLLAR",";":"SEMI",",":"COMMA","(":"L_PAREN",")":"R_PAREN","<":"L_ANG",">":"R_ANG","<=":"LTE_ANG",">=":"GTE_ANG","==":"EQ","===":"EQQ","!=":"NEQ","!==":"NEQQ","{":"L_BRACE","}":"R_BRACE","[":"L_BRACKET","]":"R_BRACKET","=":"EQUALS"};static isValidCSSClassChar(e){return n.isAlpha(e)||n.isNumeric(e)||"-"===e||"_"===e||":"===e}static isValidCSSIDChar(e){return n.isAlpha(e)||n.isNumeric(e)||"-"===e||"_"===e||":"===e}static isWhitespace(e){return" "===e||"	"===e||n.isNewline(e)}static positionString(e){return"[Line: "+e.line+", Column: "+e.column+"]"}static isNewline(e){return"\r"===e||"\n"===e}static isNumeric(e){return e>="0"&&e<="9"}static isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}static isIdentifierChar(e,t){return"_"===e||"$"===e}static isReservedChar(e){return"`"===e||"^"===e}static isValidSingleQuoteStringStart(e){if(e.length>0){var t=e[e.length-1];if("IDENTIFIER"===t.type||"CLASS_REF"===t.type||"ID_REF"===t.type||t.op&&(">"===t.value||")"===t.value))return!1}return!0}static tokenize(e,t){var r=[],o=e,a=0,s=0,u=1,l="<START>",c=0;function f(){return t&&0===c}for(;a<o.length;)if("-"===q()&&"-"===C()&&(n.isWhitespace(N(2))||""===N(2)||"-"===N(2))||"/"===q()&&"/"===C()&&(n.isWhitespace(N(2))||""===N(2)||"/"===N(2)))p();else if("/"===q()&&"*"===C()&&(n.isWhitespace(N(2))||""===N(2)||"*"===N(2)))d();else if(n.isWhitespace(q()))r.push(A());else if(!O()&&"."===q()&&(n.isAlpha(C())||"{"===C()||"-"===C()))r.push(v());else if(!O()&&"#"===q()&&(n.isAlpha(C())||"{"===C()))r.push(T());else if("["===q()&&"@"===C())r.push(g());else if("@"===q())r.push(E());else if("*"===q()&&n.isAlpha(C()))r.push(y());else if(n.isAlpha(q())||!f()&&n.isIdentifierChar(q()))r.push(x());else if(n.isNumeric(q()))r.push(k());else if(f()||'"'!==q()&&"`"!==q()){if(f()||"'"!==q()){if(n.OP_TABLE[q()])"$"===l&&"{"===q()&&c++,"}"===q()&&c--,r.push(b());else if(f()||n.isReservedChar(q()))r.push(h("RESERVED",R()));else if(a<o.length)throw Error("Unknown token: "+q()+" ")}else n.isValidSingleQuoteStringStart(r)?r.push(S()):r.push(b())}else r.push(S());return new i(r,[],o);function m(e,t){var r=h(e,t);return r.op=!0,r}function h(e,t){return{type:e,value:t||"",start:a,end:a+1,column:s,line:u}}function p(){for(;q()&&!n.isNewline(q());)R();R()}function d(){for(;q()&&!("*"===q()&&"/"===C());)R();R(),R()}function v(){var e=h("CLASS_REF"),t=R();if("{"===q()){for(e.template=!0,t+=R();q()&&"}"!==q();)t+=R();if("}"!==q())throw Error("Unterminated class reference");t+=R()}else for(;n.isValidCSSClassChar(q());)t+=R();return e.value=t,e.end=a,e}function g(){for(var e=h("ATTRIBUTE_REF"),t=R();a<o.length&&"]"!==q();)t+=R();return"]"===q()&&(t+=R()),e.value=t,e.end=a,e}function E(){for(var e=h("ATTRIBUTE_REF"),t=R();n.isValidCSSIDChar(q());)t+=R();return"="===q()&&(t+=R(),'"'===q()||"'"===q()?t+=S().value:(n.isAlpha(q())||n.isNumeric(q())||n.isIdentifierChar(q()))&&(t+=x().value)),e.value=t,e.end=a,e}function y(){for(var e=h("STYLE_REF"),t=R();n.isAlpha(q())||"-"===q();)t+=R();return e.value=t,e.end=a,e}function T(){var e=h("ID_REF"),t=R();if("{"===q()){for(e.template=!0,t+=R();q()&&"}"!==q();)t+=R();if("}"!==q())throw Error("Unterminated id reference");R()}else for(;n.isValidCSSIDChar(q());)t+=R();return e.value=t,e.end=a,e}function x(){for(var e=h("IDENTIFIER"),t=R();n.isAlpha(q())||n.isNumeric(q())||n.isIdentifierChar(q());)t+=R();return"!"===q()&&"beep"===t&&(t+=R()),e.value=t,e.end=a,e}function k(){for(var e=h("NUMBER"),t=R();n.isNumeric(q());)t+=R();for("."===q()&&n.isNumeric(C())&&(t+=R());n.isNumeric(q());)t+=R();for(("e"===q()||"E"===q())&&(n.isNumeric(C())?t+=R():"-"===C()&&(t+=R()+R()));n.isNumeric(q());)t+=R();return e.value=t,e.end=a,e}function b(){for(var e=m(),t=R();q()&&n.OP_TABLE[t+q()];)t+=R();return e.type=n.OP_TABLE[t],e.value=t,e.end=a,e}function S(){for(var e=h("STRING"),t=R(),r="";q()&&q()!==t;)if("\\"===q()){R();let t=R();if("b"===t)r+="\b";else if("f"===t)r+="\f";else if("n"===t)r+="\n";else if("r"===t)r+="\r";else if("t"===t)r+="	";else if("v"===t)r+="\v";else if("x"===t){let t=w();if(Number.isNaN(t))throw Error("Invalid hexadecimal escape at "+n.positionString(e));r+=String.fromCharCode(t)}else r+=t}else r+=R();if(q()!==t)throw Error("Unterminated string at "+n.positionString(e));return R(),e.value=r,e.end=a,e.template="`"===t,e}function w(){let e=16;if(!q())return NaN;let t=e*Number.parseInt(R(),e);return q()?t+=Number.parseInt(R(),e):NaN}function q(){return o.charAt(a)}function C(){return o.charAt(a+1)}function N(e=1){return o.charAt(a+e)}function R(){return l=q(),a++,s++,l}function O(){return n.isAlpha(l)||n.isNumeric(l)||")"===l||'"'===l||"'"===l||"`"===l||"}"===l||"]"===l}function A(){for(var e=h("WHITESPACE"),t="";q()&&n.isWhitespace(q());)n.isNewline(q())&&(s=0,u++),t+=R();return e.value=t,e.end=a,e}}tokenize(e,t){return n.tokenize(e,t)}}class i{constructor(e,t,r){this.tokens=e,this.consumed=t,this.source=r,this.consumeWhitespace()}get list(){return this.tokens}_lastConsumed=null;consumeWhitespace(){for(;"WHITESPACE"===this.token(0,!0).type;)this.consumed.push(this.tokens.shift())}raiseError(e,t){o.raiseParseError(e,t)}requireOpToken(e){var t=this.matchOpToken(e);if(t)return t;this.raiseError(this,"Expected '"+e+"' but found '"+this.currentToken().value+"'")}matchAnyOpToken(e,t,r){for(var n=0;n<arguments.length;n++){var i=arguments[n],o=this.matchOpToken(i);if(o)return o}}matchAnyToken(e,t,r){for(var n=0;n<arguments.length;n++){var i=arguments[n],o=this.matchToken(i);if(o)return o}}matchOpToken(e){if(this.currentToken()&&this.currentToken().op&&this.currentToken().value===e)return this.consumeToken()}requireTokenType(e,t,r,n){var i=this.matchTokenType(e,t,r,n);if(i)return i;this.raiseError(this,"Expected one of "+JSON.stringify([e,t,r]))}matchTokenType(e,t,r,n){if(this.currentToken()&&this.currentToken().type&&[e,t,r,n].indexOf(this.currentToken().type)>=0)return this.consumeToken()}requireToken(e,t){var r=this.matchToken(e,t);if(r)return r;this.raiseError(this,"Expected '"+e+"' but found '"+this.currentToken().value+"'")}peekToken(e,t,r){if(t=t||0,r=r||"IDENTIFIER",this.tokens[t]&&this.tokens[t].value===e&&this.tokens[t].type===r)return this.tokens[t]}matchToken(e,t){if(-1===this.follows.indexOf(e)&&(t=t||"IDENTIFIER",this.currentToken()&&this.currentToken().value===e&&this.currentToken().type===t))return this.consumeToken()}consumeToken(){var e=this.tokens.shift();return this.consumed.push(e),this._lastConsumed=e,this.consumeWhitespace(),e}consumeUntil(e,t){for(var r=[],n=this.token(0,!0);(null==t||n.type!==t)&&(null==e||n.value!==e)&&"EOF"!==n.type;){var i=this.tokens.shift();this.consumed.push(i),r.push(n),n=this.token(0,!0)}return this.consumeWhitespace(),r}lastWhitespace(){return this.consumed[this.consumed.length-1]&&"WHITESPACE"===this.consumed[this.consumed.length-1].type?this.consumed[this.consumed.length-1].value:""}consumeUntilWhitespace(){return this.consumeUntil(null,"WHITESPACE")}hasMore(){return this.tokens.length>0}token(e,t){var r,n=0;do{if(!t)for(;this.tokens[n]&&"WHITESPACE"===this.tokens[n].type;)n++;r=this.tokens[n],e--,n++}while(e>-1)return r||{type:"EOF",value:"<<<EOF>>>"}}currentToken(){return this.token(0)}lastMatch(){return this._lastConsumed}static sourceFor=function(){return this.programSource.substring(this.startToken.start,this.endToken.end)};static lineFor=function(){return this.programSource.split("\n")[this.startToken.line-1]};follows=[];pushFollow(e){this.follows.push(e)}popFollow(){this.follows.pop()}clearFollows(){var e=this.follows;return this.follows=[],e}restoreFollows(e){this.follows=e}}class o{constructor(e){this.runtime=e,this.possessivesDisabled=!1,this.addGrammarElement("feature",function(e,t,r){if(r.matchOpToken("(")){var n=e.requireElement("feature",r);return r.requireOpToken(")"),n}var i=e.FEATURES[r.currentToken().value||""];if(i)return i(e,t,r)}),this.addGrammarElement("command",function(e,t,r){let n;if(r.matchOpToken("(")){let t=e.requireElement("command",r);return r.requireOpToken(")"),t}var i=e.COMMANDS[r.currentToken().value||""];return(i?n=i(e,t,r):"IDENTIFIER"===r.currentToken().type&&(n=e.parseElement("pseudoCommand",r)),n)?e.parseElement("indirectStatement",r,n):n}),this.addGrammarElement("commandList",function(e,t,r){if(r.hasMore()){var n=e.parseElement("command",r);if(n){r.matchToken("then");let t=e.parseElement("commandList",r);return t&&(n.next=t),n}}return{type:"emptyCommandListCommand",op:function(e){return t.findNext(this,e)},execute:function(e){return t.unifiedExec(this,e)}}}),this.addGrammarElement("leaf",function(e,t,r){var n=e.parseAnyOf(e.LEAF_EXPRESSIONS,r);return null==n?e.parseElement("symbol",r):n}),this.addGrammarElement("indirectExpression",function(e,t,r,n){for(var i=0;i<e.INDIRECT_EXPRESSIONS.length;i++){var o=e.INDIRECT_EXPRESSIONS[i];n.endToken=r.lastMatch();var a=e.parseElement(o,r,n);if(a)return a}return n}),this.addGrammarElement("indirectStatement",function(e,t,r,n){if(r.matchToken("unless")){n.endToken=r.lastMatch();var i={type:"unlessStatementModifier",args:[e.requireElement("expression",r)],op:function(e,t){return t?this.next:n},execute:function(e){return t.unifiedExec(this,e)}};return n.parent=i,i}return n}),this.addGrammarElement("primaryExpression",function(e,t,r){var n=e.parseElement("leaf",r);if(n)return e.parseElement("indirectExpression",r,n);e.raiseParseError(r,"Unexpected value: "+r.currentToken().value)})}use(e){return e(this),this}GRAMMAR={};COMMANDS={};FEATURES={};LEAF_EXPRESSIONS=[];INDIRECT_EXPRESSIONS=[];initElt(e,t,r){e.startToken=t,e.sourceFor=i.sourceFor,e.lineFor=i.lineFor,e.programSource=r.source}parseElement(e,t,r){var n=this.GRAMMAR[e];if(n){var i=t.currentToken(),o=n(this,this.runtime,t,r);if(o){this.initElt(o,i,t),o.endToken=o.endToken||t.lastMatch();for(var r=o.root;null!=r;)this.initElt(r,i,t),r=r.root}return o}}requireElement(e,t,r,n){var i=this.parseElement(e,t,n);return i||o.raiseParseError(t,r||"Expected "+e),i}parseAnyOf(e,t){for(var r=0;r<e.length;r++){var n=e[r],i=this.parseElement(n,t);if(i)return i}}addGrammarElement(e,t){this.GRAMMAR[e]=t}addCommand(e,t){var r=e+"Command",n=function(e,n,i){let o=t(e,n,i);if(o)return o.type=r,o.execute=function(e){return e.meta.command=o,n.unifiedExec(this,e)},o};this.GRAMMAR[r]=n,this.COMMANDS[e]=n}addFeature(e,t){var r=e+"Feature",n=function(n,i,o){var a=t(n,i,o);if(a)return a.isFeature=!0,a.keyword=e,a.type=r,a};this.GRAMMAR[r]=n,this.FEATURES[e]=n}addLeafExpression(e,t){this.LEAF_EXPRESSIONS.push(e),this.addGrammarElement(e,t)}addIndirectExpression(e,t){this.INDIRECT_EXPRESSIONS.push(e),this.addGrammarElement(e,t)}static createParserContext(e){var t=e.currentToken(),r=e.source.split("\n"),n=t&&t.line?t.line-1:r.length-1,i=r[n],o=t&&t.line?t.column:i.length-1;return i+"\n"+" ".repeat(o)+"^^\n\n"}static raiseParseError(e,t){var r=Error(t=(t||"Unexpected Token : "+e.currentToken().value)+"\n\n"+o.createParserContext(e));throw r.tokens=e,r}raiseParseError(e,t){o.raiseParseError(e,t)}parseHyperScript(e){var t=this.parseElement("hyperscript",e);if(e.hasMore()&&this.raiseParseError(e),t)return t}setParent(e,t){"object"==typeof e&&(e.parent=t,"object"==typeof t&&(t.children=t.children||new Set,t.children.add(e)),this.setParent(e.next,t))}commandStart(e){return this.COMMANDS[e.value||""]}featureStart(e){return this.FEATURES[e.value||""]}commandBoundary(e){return!!("end"==e.value||"then"==e.value||"else"==e.value||"otherwise"==e.value||")"==e.value||this.commandStart(e)||this.featureStart(e))||"EOF"==e.type}parseStringTemplate(e){var t=[""];do if(t.push(e.lastWhitespace()),"$"===e.currentToken().value){e.consumeToken();var r=e.matchOpToken("{");t.push(this.requireElement("expression",e)),r&&e.requireOpToken("}"),t.push("")}else if("\\"===e.currentToken().value)e.consumeToken(),e.consumeToken();else{var n=e.consumeToken();t[t.length-1]+=n?n.value:""}while(e.hasMore())return t.push(e.lastWhitespace()),t}ensureTerminated(e){let t=this.runtime;for(var r={type:"implicitReturn",op:function(e){return e.meta.returned=!0,e.meta.resolve&&e.meta.resolve(),t.HALT},execute:function(e){}},n=e;n.next;)n=n.next;n.next=r}}class a{constructor(e,t){this.lexer=e??new n,this.parser=t??new o(this).use(E).use(y),this.parser.runtime=this}matchesSelector(e,t){var r=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector;return r&&r.call(e,t)}makeEvent(t,r){var n;return e.Event&&"function"==typeof e.Event?(n=new Event(t,{bubbles:!0,cancelable:!0})).detail=r:(n=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,r),n}triggerEvent(e,t,r,n){(r=r||{}).sender=n;var i=this.makeEvent(t,r);return e.dispatchEvent(i)}isArrayLike(e){return Array.isArray(e)||"undefined"!=typeof NodeList&&(e instanceof NodeList||e instanceof HTMLCollection)}isIterable(e){return"object"==typeof e&&Symbol.iterator in e&&"function"==typeof e[Symbol.iterator]}shouldAutoIterate(e){return null!=e&&e[h]||this.isArrayLike(e)}forEach(e,t){if(null==e);else if(this.isIterable(e))for(let r of e)t(r);else if(this.isArrayLike(e))for(var r=0;r<e.length;r++)t(e[r]);else t(e)}implicitLoop(e,t){if(this.shouldAutoIterate(e))for(let r of e)t(r);else t(e)}wrapArrays(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];Array.isArray(n)?t.push(Promise.all(n)):t.push(n)}return t}unwrapAsyncs(e){for(var t=0;t<e.length;t++){var r=e[t];if(r.asyncWrapper&&(e[t]=r.value),Array.isArray(r))for(var n=0;n<r.length;n++){var i=r[n];i.asyncWrapper&&(r[n]=i.value)}}}static HALT={};HALT=a.HALT;unifiedExec(e,t){for(;;){try{var r=this.unifiedEval(e,t)}catch(n){if(t.meta.handlingFinally)console.error(" Exception in finally block: ",n),r=a.HALT;else{if(this.registerHyperTrace(t,n),t.meta.errorHandler&&!t.meta.handlingError){t.meta.handlingError=!0,t.locals[t.meta.errorSymbol]=n,e=t.meta.errorHandler;continue}t.meta.currentException=n,r=a.HALT}}if(null==r){console.error(e," did not return a next element to execute! context: ",t);return}if(r.then){r.then(e=>{this.unifiedExec(e,t)}).catch(e=>{this.unifiedExec({op:function(){throw e}},t)});return}if(r===a.HALT){if(t.meta.finallyHandler&&!t.meta.handlingFinally)t.meta.handlingFinally=!0,e=t.meta.finallyHandler;else{if(t.meta.onHalt&&t.meta.onHalt(),!t.meta.currentException)return;if(t.meta.reject){t.meta.reject(t.meta.currentException);return}throw t.meta.currentException}}else e=r}}unifiedEval(e,t){var r=[t],n=!1,i=!1;if(e.args)for(var o=0;o<e.args.length;o++){var a=e.args[o];if(null==a)r.push(null);else if(Array.isArray(a)){for(var s=[],u=0;u<a.length;u++){var l=a[u],c=l?l.evaluate(t):null;c&&(c.then?n=!0:c.asyncWrapper&&(i=!0)),s.push(c)}r.push(s)}else if(a.evaluate){var c=a.evaluate(t);c&&(c.then?n=!0:c.asyncWrapper&&(i=!0)),r.push(c)}else r.push(a)}return n?new Promise((t,n)=>{Promise.all(r=this.wrapArrays(r)).then(function(r){i&&this.unwrapAsyncs(r);try{var o=e.op.apply(e,r);t(o)}catch(e){n(e)}}).catch(function(e){n(e)})}):(i&&this.unwrapAsyncs(r),e.op.apply(e,r))}_scriptAttrs=null;getScriptAttributes(){return null==this._scriptAttrs&&(this._scriptAttrs=r.attributes.replace(/ /g,"").split(",")),this._scriptAttrs}getScript(e){for(var t=0;t<this.getScriptAttributes().length;t++){var r=this.getScriptAttributes()[t];if(e.hasAttribute&&e.hasAttribute(r))return e.getAttribute(r)}return e instanceof HTMLScriptElement&&"text/hyperscript"===e.type?e.innerText:null}hyperscriptFeaturesMap=new WeakMap;getHyperscriptFeatures(e){var t=this.hyperscriptFeaturesMap.get(e);return void 0===t&&e&&this.hyperscriptFeaturesMap.set(e,t={}),t}addFeatures(e,t){e&&(Object.assign(t.locals,this.getHyperscriptFeatures(e)),this.addFeatures(e.parentElement,t))}makeContext(e,t,r,n){return new f(e,t,r,n,this)}getScriptSelector(){return this.getScriptAttributes().map(function(e){return"["+e+"]"}).join(", ")}convertValue(e,r){for(var n=t.dynamicResolvers,i=0;i<n.length;i++){var o=(0,n[i])(r,e);if(void 0!==o)return o}if(null==e)return null;var a=t[r];if(a)return a(e);throw"Unknown conversion : "+r}parse(e){let t=this.lexer,r=this.parser;var n=t.tokenize(e);if(this.parser.commandStart(n.currentToken())){var i=r.requireElement("commandList",n);return n.hasMore()&&r.raiseParseError(n),r.ensureTerminated(i),i}if(r.featureStart(n.currentToken())){var o=r.requireElement("hyperscript",n);return n.hasMore()&&r.raiseParseError(n),o}var a=r.requireElement("expression",n);return n.hasMore()&&r.raiseParseError(n),a}evaluateNoPromise(e,t){let r=e.evaluate(t);if(r.next)throw Error(i.sourceFor.call(e)+" returned a Promise in a context that they are not allowed.");return r}evaluate(t,r,n){class i extends EventTarget{constructor(e){super(),this.module=e}toString(){return this.module.id}}var o="document"in e?e.document.body:new i(n&&n.module);r=Object.assign(this.makeContext(o,null,o,null),r||{});var a=this.parse(t);return a.execute?(a.execute(r),void 0!==r.meta.returnValue)?r.meta.returnValue:r.result:a.apply?(a.apply(o,o,n),this.getHyperscriptFeatures(o)):a.evaluate(r)}processNode(e){var t=this.getScriptSelector();this.matchesSelector(e,t)&&this.initElement(e,e),e instanceof HTMLScriptElement&&"text/hyperscript"===e.type&&this.initElement(e,document.body),e.querySelectorAll&&this.forEach(e.querySelectorAll(t+", [type='text/hyperscript']"),e=>{this.initElement(e,e instanceof HTMLScriptElement&&"text/hyperscript"===e.type?document.body:e)})}initElement(e,t){if(!(e.closest&&e.closest(r.disableSelector))){var n=this.getInternalData(e);if(!n.initialized){var i=this.getScript(e);if(i)try{n.initialized=!0,n.script=i;let r=this.lexer,s=this.parser;var o=r.tokenize(i),a=s.parseHyperScript(o);if(!a)return;a.apply(t||e,e),setTimeout(()=>{this.triggerEvent(t||e,"load",{hyperscript:!0})},1)}catch(t){this.triggerEvent(e,"exception",{error:t}),console.error("hyperscript errors were found on the following element:",e,"\n\n",t.message,t.stack)}}}}internalDataMap=new WeakMap;getInternalData(e){var t=this.internalDataMap.get(e);return void 0===t&&this.internalDataMap.set(e,t={}),t}typeCheck(e,t,r){return null==e&&!!r||Object.prototype.toString.call(e).slice(8,-1)===t}getElementScope(e){var t=e.meta&&e.meta.owner;if(!t)return{};var r=this.getInternalData(t),n="elementScope";return e.meta.feature&&e.meta.feature.behavior&&(n=e.meta.feature.behavior+"Scope"),p(r,n)}isReservedWord(e){return["meta","it","result","locals","event","target","detail","sender","body"].includes(e)}isHyperscriptContext(e){return e instanceof f}resolveSymbol(t,r,n){if("me"===t||"my"===t||"I"===t)return r.me;if("it"===t||"its"===t||"result"===t)return r.result;if("you"===t||"your"===t||"yourself"===t)return r.you;if("global"===n)return e[t];if("element"===n){var i=this.getElementScope(r);return i[t]}if("local"===n)return r.locals[t];if(r.meta&&r.meta.context){var o=r.meta.context[t];if(void 0!==o||r.meta.context.detail&&void 0!==(o=r.meta.context.detail[t]))return o}if(this.isHyperscriptContext(r)&&!this.isReservedWord(t))var a=r.locals[t];else var a=r[t];if(void 0!==a)return a;var i=this.getElementScope(r);return void 0!==(a=i[t])?a:e[t]}setSymbol(t,r,n,i){if("global"===n)e[t]=i;else if("element"===n){var o=this.getElementScope(r);o[t]=i}else if("local"===n)r.locals[t]=i;else if(this.isHyperscriptContext(r)&&!this.isReservedWord(t)&&void 0!==r.locals[t])r.locals[t]=i;else{var o=this.getElementScope(r);void 0!==o[t]?o[t]=i:this.isHyperscriptContext(r)&&!this.isReservedWord(t)?r.locals[t]=i:r[t]=i}}findNext(e,t){if(e)return e.resolveNext?e.resolveNext(t):e.next?e.next:this.findNext(e.parent,t)}flatGet(e,t,r){if(null!=e){var n=r(e,t);if(void 0!==n)return n;if(this.shouldAutoIterate(e)){var i=[];for(var o of e){var a=r(o,t);i.push(a)}return i}}}resolveProperty(e,t){return this.flatGet(e,t,(e,t)=>e[t])}resolveAttribute(e,t){return this.flatGet(e,t,(e,t)=>e.getAttribute&&e.getAttribute(t))}resolveStyle(e,t){return this.flatGet(e,t,(e,t)=>e.style&&e.style[t])}resolveComputedStyle(e,t){return this.flatGet(e,t,(e,t)=>getComputedStyle(e).getPropertyValue(t))}assignToNamespace(t,r,n,i){let o;for(o="undefined"!=typeof document&&t===document.body?e:this.getHyperscriptFeatures(t);void 0!==(a=r.shift());){var a,s=o[a];null==s&&(s={},o[a]=s),o=s}o[n]=i}getHyperTrace(e,t){for(var r=[],n=e;n.meta.caller;)n=n.meta.caller;if(n.meta.traceMap)return n.meta.traceMap.get(t,r)}registerHyperTrace(e,t){for(var r=[],n=null;null!=e;)r.push(e),n=e,e=e.meta.caller;if(null==n.meta.traceMap&&(n.meta.traceMap=new Map),!n.meta.traceMap.get(t)){var i={trace:r,print:function(e){(e=e||console.error)("hypertrace /// ");for(var t=0,n=0;n<r.length;n++)t=Math.max(t,r[n].meta.feature.displayName.length);for(var n=0;n<r.length;n++){var i=r[n];e("  ->",i.meta.feature.displayName.padEnd(t+2),"-",i.meta.owner)}}};n.meta.traceMap.set(t,i)}}escapeSelector(e){return e.replace(/:/g,function(e){return"\\"+e})}nullCheck(e,t){if(null==e)throw Error("'"+t.sourceFor()+"' is null")}isEmpty(e){return void 0==e||0===e.length}doesExist(e){if(null==e)return!1;if(this.shouldAutoIterate(e)){for(let t of e)return!0;return!1}return!0}getRootNode(e){if(e&&e instanceof Node){var t=e.getRootNode();if(t instanceof Document||t instanceof ShadowRoot)return t}return document}getEventQueueFor(e,t){let r=this.getInternalData(e);var n=r.eventQueues;null==n&&(n=new Map,r.eventQueues=n);var i=n.get(t);return null==i&&(i={queue:[],executing:!1},n.set(t,i)),i}beepValueToConsole(e,t,r){if(this.triggerEvent(e,"hyperscript:beep",{element:e,expression:t,value:r})){n=r?r instanceof m?"ElementCollection":r.constructor?r.constructor.name:"unknown":"object (null)";var n,o=r;"String"===n?o='"'+o+'"':r instanceof m&&(o=Array.from(r)),console.log("///_ BEEP! The expression ("+i.sourceFor.call(t).replace("beep! ","")+") evaluates to:",o,"of type "+n)}}hyperscriptUrl="document"in e&&document.currentScript?document.currentScript.src:null}function s(){return document.cookie.split("; ").map(e=>{let t=e.split("=");return{name:t[0],value:decodeURIComponent(t[1])}})}function u(e){document.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}function l(){for(let e of s())u(e.name)}let c=new Proxy({},{get(e,t){if("then"===t||"asyncWrapper"===t)return null;if("length"===t)return s().length;if("clear"===t)return u;if("clearAll"===t)return l;if("string"==typeof t){if(!isNaN(t))return s()[parseInt(t)];{let e=document.cookie.split("; ").find(e=>e.startsWith(t+"="))?.split("=")[1];if(e)return decodeURIComponent(e)}}else if(t===Symbol.iterator)return s()[t]},set(e,t,r){var n=null;return"string"==typeof r?n=encodeURIComponent(r)+";samesite=lax":(n=encodeURIComponent(r.value),r.expires&&(n+=";expires="+r.maxAge),r.maxAge&&(n+=";max-age="+r.maxAge),r.partitioned&&(n+=";partitioned="+r.partitioned),r.path&&(n+=";path="+r.path),r.samesite&&(n+=";samesite="+r.path),r.secure&&(n+=";secure="+r.path)),document.cookie=t+"="+n,!0}});class f{constructor(t,r,n,i,o){this.meta={parser:o.parser,lexer:o.lexer,runtime:o,owner:t,feature:r,iterators:{},ctx:this},this.locals={cookies:c},this.me=n,this.you=void 0,this.result=void 0,this.event=i,this.target=i?i.target:null,this.detail=i?i.detail:null,this.sender=i&&i.detail?i.detail.sender:null,this.body="document"in e?document.body:null,o.addFeatures(t,this)}}class m{constructor(e,t,r){this._css=e,this.relativeToElement=t,this.escape=r,this[h]=!0}get css(){return this.escape?a.prototype.escapeSelector(this._css):this._css}get className(){return this._css.substr(1)}get id(){return this.className()}contains(e){for(let t of this)if(t.contains(e))return!0;return!1}get length(){return this.selectMatches().length}[Symbol.iterator](){return this.selectMatches()[Symbol.iterator]()}selectMatches(){return a.prototype.getRootNode(this.relativeToElement).querySelectorAll(this.css)}}let h=Symbol();function p(e,t){var r=e[t];if(r)return r;var n={};return e[t]=n,n}function d(e){try{return JSON.parse(e)}catch(e){return v(e),null}}function v(e){console.error?console.error(e):console.log&&console.log("ERROR: ",e)}function g(e,t){return new(e.bind.apply(e,[e].concat(t)))}function E(t){t.addLeafExpression("parenthesized",function(e,t,r){if(r.matchOpToken("(")){var n=r.clearFollows();try{var i=e.requireElement("expression",r)}finally{r.restoreFollows(n)}return r.requireOpToken(")"),i}}),t.addLeafExpression("string",function(e,t,r){var i,o=r.matchTokenType("STRING");if(o){var a=o.value;if(o.template){var s=n.tokenize(a,!0);i=e.parseStringTemplate(s)}else i=[];return{type:"string",token:o,args:i,op:function(e){for(var t="",r=1;r<arguments.length;r++){var n=arguments[r];void 0!==n&&(t+=n)}return t},evaluate:function(e){return 0===i.length?a:t.unifiedEval(this,e)}}}}),t.addGrammarElement("nakedString",function(e,t,r){if(r.hasMore()){var n=r.consumeUntilWhitespace();return r.matchTokenType("WHITESPACE"),{type:"nakedString",tokens:n,evaluate:function(e){return n.map(function(e){return e.value}).join("")}}}}),t.addLeafExpression("number",function(e,t,r){var n=r.matchTokenType("NUMBER");if(n){var i=n,o=parseFloat(n.value);return{type:"number",value:o,numberToken:i,evaluate:function(){return o}}}}),t.addLeafExpression("idRef",function(e,t,r){var i=r.matchTokenType("ID_REF");if(i&&i.value){if(i.template){var o=i.value.substring(2),a=n.tokenize(o);return{type:"idRefTemplate",args:[e.requireElement("expression",a)],op:function(e,r){return t.getRootNode(e.me).getElementById(r)},evaluate:function(e){return t.unifiedEval(this,e)}}}{let e=i.value.substring(1);return{type:"idRef",css:i.value,value:e,evaluate:function(r){return t.getRootNode(r.me).getElementById(e)}}}}}),t.addLeafExpression("classRef",function(e,t,r){var i=r.matchTokenType("CLASS_REF");if(i&&i.value){if(i.template){var o=i.value.substring(2),a=n.tokenize(o);return{type:"classRefTemplate",args:[e.requireElement("expression",a)],op:function(e,t){return new m("."+t,e.me,!0)},evaluate:function(e){return t.unifiedEval(this,e)}}}{let e=i.value;return{type:"classRef",css:e,evaluate:function(t){return new m(e,t.me,!0)}}}}});class r extends m{constructor(e,t,r){super(e,t),this.templateParts=r,this.elements=r.filter(e=>e instanceof Element)}get css(){let e="",t=0;for(let r of this.templateParts)r instanceof Element?e+="[data-hs-query-id='"+t+++"']":e+=r;return e}[Symbol.iterator](){this.elements.forEach((e,t)=>e.dataset.hsQueryId=t);let e=super[Symbol.iterator]();return this.elements.forEach(e=>e.removeAttribute("data-hs-query-id")),e}}t.addLeafExpression("queryRef",function(e,t,i){var o,a,s;if(i.matchOpToken("<")){var u=i.consumeUntil("/");i.requireOpToken("/"),i.requireOpToken(">");var l=u.map(function(e){return"STRING"===e.type?'"'+e.value+'"':e.value}).join("");return l.indexOf("$")>=0&&(o=!0,a=n.tokenize(l,!0),s=e.parseStringTemplate(a)),{type:"queryRef",css:l,args:s,op:function(e,...t){return o?new r(l,e.me,t):new m(l,e.me)},evaluate:function(e){return t.unifiedEval(this,e)}}}}),t.addLeafExpression("attributeRef",function(e,t,r){var n=r.matchTokenType("ATTRIBUTE_REF");if(n&&n.value){var i=n.value;if(0===i.indexOf("["))var o=i.substring(2,i.length-1);else var o=i.substring(1);var a="["+o+"]",s=o.split("="),u=s[0],l=s[1];return l&&0===l.indexOf('"')&&(l=l.substring(1,l.length-1)),{type:"attributeRef",name:u,css:a,value:l,op:function(e){var t=e.you||e.me;if(t)return t.getAttribute(u)},evaluate:function(e){return t.unifiedEval(this,e)}}}}),t.addLeafExpression("styleRef",function(e,t,r){var n=r.matchTokenType("STYLE_REF");if(n&&n.value){var i=n.value.substr(1);return i.startsWith("computed-")?{type:"computedStyleRef",name:i=i.substr(9),op:function(e){var r=e.you||e.me;if(r)return t.resolveComputedStyle(r,i)},evaluate:function(e){return t.unifiedEval(this,e)}}:{type:"styleRef",name:i,op:function(e){var r=e.you||e.me;if(r)return t.resolveStyle(r,i)},evaluate:function(e){return t.unifiedEval(this,e)}}}}),t.addGrammarElement("objectKey",function(e,t,r){if(n=r.matchTokenType("STRING"))return{type:"objectKey",key:n.value,evaluate:function(){return n.value}};if(r.matchOpToken("[")){var n,i=e.parseElement("expression",r);return r.requireOpToken("]"),{type:"objectKey",expr:i,args:[i],op:function(e,t){return t},evaluate:function(e){return t.unifiedEval(this,e)}}}var o="";do(n=r.matchTokenType("IDENTIFIER")||r.matchOpToken("-"))&&(o+=n.value);while(n)return{type:"objectKey",key:o,evaluate:function(){return o}}}),t.addLeafExpression("objectLiteral",function(e,t,r){if(r.matchOpToken("{")){var n=[],i=[];if(!r.matchOpToken("}")){do{var o=e.requireElement("objectKey",r);r.requireOpToken(":");var a=e.requireElement("expression",r);i.push(a),n.push(o)}while(r.matchOpToken(","))r.requireOpToken("}")}return{type:"objectLiteral",args:[n,i],op:function(e,t,r){for(var n={},i=0;i<t.length;i++)n[t[i]]=r[i];return n},evaluate:function(e){return t.unifiedEval(this,e)}}}}),t.addGrammarElement("nakedNamedArgumentList",function(e,t,r){var n=[],i=[];if("IDENTIFIER"===r.currentToken().type)do{var o=r.requireTokenType("IDENTIFIER");r.requireOpToken(":");var a=e.requireElement("expression",r);i.push(a),n.push({name:o,value:a})}while(r.matchOpToken(","))return{type:"namedArgumentList",fields:n,args:[i],op:function(e,t){for(var r={_namedArgList_:!0},i=0;i<t.length;i++)r[n[i].name.value]=t[i];return r},evaluate:function(e){return t.unifiedEval(this,e)}}}),t.addGrammarElement("namedArgumentList",function(e,t,r){if(r.matchOpToken("(")){var n=e.requireElement("nakedNamedArgumentList",r);return r.requireOpToken(")"),n}}),t.addGrammarElement("symbol",function(e,t,r){var n="default";r.matchToken("global")?n="global":r.matchToken("element")||r.matchToken("module")?(n="element",r.matchOpToken("'")&&r.requireToken("s")):r.matchToken("local")&&(n="local");let i=r.matchOpToken(":"),o=r.matchTokenType("IDENTIFIER");if(o&&o.value){var a=o.value;return i&&(a=":"+a),"default"===n&&(0===a.indexOf("$")&&(n="global"),0===a.indexOf(":")&&(n="element")),{type:"symbol",token:o,scope:n,name:a,evaluate:function(e){return t.resolveSymbol(a,e,n)}}}}),t.addGrammarElement("implicitMeTarget",function(e,t,r){return{type:"implicitMeTarget",evaluate:function(e){return e.you||e.me}}}),t.addLeafExpression("boolean",function(e,t,r){var n=r.matchToken("true")||r.matchToken("false");if(!n)return;let i="true"===n.value;return{type:"boolean",evaluate:function(e){return i}}}),t.addLeafExpression("null",function(e,t,r){if(r.matchToken("null"))return{type:"null",evaluate:function(e){return null}}}),t.addLeafExpression("arrayLiteral",function(e,t,r){if(r.matchOpToken("[")){var n=[];if(!r.matchOpToken("]")){do{var i=e.requireElement("expression",r);n.push(i)}while(r.matchOpToken(","))r.requireOpToken("]")}return{type:"arrayLiteral",values:n,args:[n],op:function(e,t){return t},evaluate:function(e){return t.unifiedEval(this,e)}}}}),t.addLeafExpression("blockLiteral",function(e,t,r){if(r.matchOpToken("\\")){var n=[],i=r.matchTokenType("IDENTIFIER");if(i)for(n.push(i);r.matchOpToken(",");)n.push(r.requireTokenType("IDENTIFIER"));r.requireOpToken("-"),r.requireOpToken(">");var o=e.requireElement("expression",r);return{type:"blockLiteral",args:n,expr:o,evaluate:function(e){return function(){for(var t=0;t<n.length;t++)e.locals[n[t].value]=arguments[t];return o.evaluate(e)}}}}}),t.addIndirectExpression("propertyAccess",function(e,t,r,n){if(r.matchOpToken(".")){var i=r.requireTokenType("IDENTIFIER"),o={type:"propertyAccess",root:n,prop:i,args:[n],op:function(e,r){return t.resolveProperty(r,i.value)},evaluate:function(e){return t.unifiedEval(this,e)}};return e.parseElement("indirectExpression",r,o)}}),t.addIndirectExpression("of",function(e,t,r,n){if(r.matchToken("of")){for(var i=e.requireElement("unaryExpression",r),o=null,a=n;a.root;)o=a,a=a.root;"symbol"!==a.type&&"attributeRef"!==a.type&&"styleRef"!==a.type&&"computedStyleRef"!==a.type&&e.raiseParseError(r,"Cannot take a property of a non-symbol: "+a.type);var s="attributeRef"===a.type,u="styleRef"===a.type||"computedStyleRef"===a.type;if(s||u)var l=a;var c=a.name,f={type:"ofExpression",prop:a.token,root:i,attribute:l,expression:n,args:[i],op:function(e,r){return s?t.resolveAttribute(r,c):u?"computedStyleRef"===a.type?t.resolveComputedStyle(r,c):t.resolveStyle(r,c):t.resolveProperty(r,c)},evaluate:function(e){return t.unifiedEval(this,e)}};return"attributeRef"===a.type&&(f.attribute=a),o?(o.root=f,o.args=[f]):n=f,e.parseElement("indirectExpression",r,n)}}),t.addIndirectExpression("possessive",function(e,t,r,n){if(!e.possessivesDisabled){var i=r.matchOpToken("'");if(i||"symbol"===n.type&&("my"===n.name||"its"===n.name||"your"===n.name)&&("IDENTIFIER"===r.currentToken().type||"ATTRIBUTE_REF"===r.currentToken().type||"STYLE_REF"===r.currentToken().type)){i&&r.requireToken("s"),null==(o=e.parseElement("attributeRef",r))&&null==(a=e.parseElement("styleRef",r))&&(s=r.requireTokenType("IDENTIFIER"));var o,a,s,u={type:"possessive",root:n,attribute:o||a,prop:s,args:[n],op:function(e,r){if(o)var n,n=t.resolveAttribute(r,o.name);else if(a)n="computedStyleRef"===a.type?t.resolveComputedStyle(r,a.name):t.resolveStyle(r,a.name);else var n=t.resolveProperty(r,s.value);return n},evaluate:function(e){return t.unifiedEval(this,e)}};return e.parseElement("indirectExpression",r,u)}}}),t.addIndirectExpression("inExpression",function(e,t,r,n){if(r.matchToken("in")){var i=e.requireElement("unaryExpression",r),o={type:"inExpression",root:n,args:[n,i],op:function(e,r,n){var i=[];if(r.css)t.implicitLoop(n,function(e){for(var t=e.querySelectorAll(r.css),n=0;n<t.length;n++)i.push(t[n])});else if(r instanceof Element){var o=!1;if(t.implicitLoop(n,function(e){e.contains(r)&&(o=!0)}),o)return r}else t.implicitLoop(r,function(e){t.implicitLoop(n,function(t){e===t&&i.push(e)})});return i},evaluate:function(e){return t.unifiedEval(this,e)}};return e.parseElement("indirectExpression",r,o)}}),t.addIndirectExpression("asExpression",function(e,t,r,n){if(r.matchToken("as")){r.matchToken("a")||r.matchToken("an");var i=e.requireElement("dotOrColonPath",r).evaluate(),o={type:"asExpression",root:n,args:[n],op:function(e,r){return t.convertValue(r,i)},evaluate:function(e){return t.unifiedEval(this,e)}};return e.parseElement("indirectExpression",r,o)}}),t.addIndirectExpression("functionCall",function(e,t,r,n){if(r.matchOpToken("(")){var i=[];if(!r.matchOpToken(")")){do i.push(e.requireElement("expression",r));while(r.matchOpToken(","))r.requireOpToken(")")}if(n.root)var o={type:"functionCall",root:n,argExressions:i,args:[n.root,i],op:function(e,r,i){t.nullCheck(r,n.root);var o=r[n.prop.value];return t.nullCheck(o,n),o.hyperfunc&&i.push(e),o.apply(r,i)},evaluate:function(e){return t.unifiedEval(this,e)}};else var o={type:"functionCall",root:n,argExressions:i,args:[n,i],op:function(e,r,i){return t.nullCheck(r,n),r.hyperfunc&&i.push(e),r.apply(null,i)},evaluate:function(e){return t.unifiedEval(this,e)}};return e.parseElement("indirectExpression",r,o)}}),t.addIndirectExpression("attributeRefAccess",function(e,t,r,n){var i=e.parseElement("attributeRef",r);if(i){var o={type:"attributeRefAccess",root:n,attribute:i,args:[n],op:function(e,r){return t.resolveAttribute(r,i.name)},evaluate:function(e){return t.unifiedEval(this,e)}};return o}}),t.addIndirectExpression("arrayIndex",function(e,t,r,n){if(r.matchOpToken("[")){var i=!1,o=!1,a=null,s=null;r.matchOpToken("..")?(i=!0,a=e.requireElement("expression",r)):(a=e.requireElement("expression",r),r.matchOpToken("..")&&(o=!0,"R_BRACKET"!==r.currentToken().type&&(s=e.parseElement("expression",r)))),r.requireOpToken("]");var u={type:"arrayIndex",root:n,prop:a,firstIndex:a,secondIndex:s,args:[n,a,s],op:function(e,t,r,n){return null==t?null:i?(r<0&&(r=t.length+r),t.slice(0,r+1)):o?null!=n?(n<0&&(n=t.length+n),t.slice(r,n+1)):t.slice(r):t[r]},evaluate:function(e){return t.unifiedEval(this,e)}};return e.parseElement("indirectExpression",r,u)}});var o=["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","pc","pt","px"];t.addGrammarElement("postfixExpression",function(e,t,r){var n=e.parseElement("primaryExpression",r);let i=r.matchAnyToken.apply(r,o)||r.matchOpToken("%");if(i)return{type:"stringPostfix",postfix:i.value,args:[n],op:function(e,t){return""+t+i.value},evaluate:function(e){return t.unifiedEval(this,e)}};var a=null;if(r.matchToken("s")||r.matchToken("seconds")?a=1e3:(r.matchToken("ms")||r.matchToken("milliseconds"))&&(a=1),a)return{type:"timeExpression",time:n,factor:a,args:[n],op:function(e,t){return t*a},evaluate:function(e){return t.unifiedEval(this,e)}};if(!r.matchOpToken(":"))return n;var s=r.requireTokenType("IDENTIFIER");if(s.value){var u=!r.matchOpToken("!");return{type:"typeCheck",typeName:s,nullOk:u,args:[n],op:function(e,r){if(t.typeCheck(r,this.typeName.value,u))return r;throw Error("Typecheck failed!  Expected: "+s.value)},evaluate:function(e){return t.unifiedEval(this,e)}}}}),t.addGrammarElement("logicalNot",function(e,t,r){if(r.matchToken("not")){var n=e.requireElement("unaryExpression",r);return{type:"logicalNot",root:n,args:[n],op:function(e,t){return!t},evaluate:function(e){return t.unifiedEval(this,e)}}}}),t.addGrammarElement("noExpression",function(e,t,r){if(r.matchToken("no")){var n=e.requireElement("unaryExpression",r);return{type:"noExpression",root:n,args:[n],op:function(e,r){return t.isEmpty(r)},evaluate:function(e){return t.unifiedEval(this,e)}}}}),t.addLeafExpression("some",function(e,t,r){if(r.matchToken("some")){var n=e.requireElement("expression",r);return{type:"noExpression",root:n,args:[n],op:function(e,r){return!t.isEmpty(r)},evaluate(e){return t.unifiedEval(this,e)}}}}),t.addGrammarElement("negativeNumber",function(e,t,r){if(r.matchOpToken("-")){var n=e.requireElement("unaryExpression",r);return{type:"negativeNumber",root:n,args:[n],op:function(e,t){return -1*t},evaluate:function(e){return t.unifiedEval(this,e)}}}}),t.addGrammarElement("unaryExpression",function(e,t,r){return r.matchToken("the"),e.parseAnyOf(["beepExpression","logicalNot","relativePositionalExpression","positionalExpression","noExpression","negativeNumber","postfixExpression"],r)}),t.addGrammarElement("beepExpression",function(e,t,r){if(r.matchToken("beep!")){var n=e.parseElement("unaryExpression",r);if(n){n.booped=!0;var i=n.evaluate;return n.evaluate=function(e){let r=i.apply(n,arguments),o=e.me;return t.beepValueToConsole(o,n,r),r},n}}});var s=function(e,t,r,n){for(var i=t.querySelectorAll(r),o=0;o<i.length;o++){var a=i[o];if(a.compareDocumentPosition(e)===Node.DOCUMENT_POSITION_PRECEDING)return a}if(n)return i[0]},u=function(e,t,r,n){for(var i=t.querySelectorAll(r),o=i.length-1;o>=0;o--){var a=i[o];if(a.compareDocumentPosition(e)===Node.DOCUMENT_POSITION_FOLLOWING)return a}if(n)return i[i.length-1]},l=function(e,t,r,n){var i=[];a.prototype.forEach(t,function(t){(t.matches(r)||t===e)&&i.push(t)});for(var o=0;o<i.length-1;o++)if(i[o]===e)return i[o+1];if(n){var s=i[0];if(s&&s.matches(r))return s}},c=function(e,t,r,n){return l(e,Array.from(t).reverse(),r,n)};function f(e,t,r){if(t.contains)return t.contains(r);if(t.includes)return t.includes(r);throw Error("The value of "+e.sourceFor()+" does not have a contains or includes method on it")}function h(e,t,r){if(t.match)return!!t.match(r);if(t.matches)return t.matches(r);throw Error("The value of "+e.sourceFor()+" does not have a match or matches method on it")}t.addGrammarElement("relativePositionalExpression",function(e,t,r){var n,o=r.matchAnyToken("next","previous");if(o){var a="next"===o.value,f=e.parseElement("expression",r);if(r.matchToken("from")){r.pushFollow("in");try{var m=e.requireElement("unaryExpression",r)}finally{r.popFollow()}}else var m=e.requireElement("implicitMeTarget",r);var h=!1;if(r.matchToken("in")){h=!0;var p=e.requireElement("unaryExpression",r)}else n=r.matchToken("within")?e.requireElement("unaryExpression",r):document.body;var d=!1;return r.matchToken("with")&&(r.requireToken("wrapping"),d=!0),{type:"relativePositionalExpression",from:m,forwardSearch:a,inSearch:h,wrapping:d,inElt:p,withinElt:n,operator:o.value,args:[f,m,p,n],op:function(e,t,r,n,o){var m=t.css;if(null==m)throw"Expected a CSS value to be returned by "+i.sourceFor.apply(f);if(h){if(n)return a?l(r,n,m,d):c(r,n,m,d)}else if(o)return a?s(r,o,m,d):u(r,o,m,d)},evaluate:function(e){return t.unifiedEval(this,e)}}}}),t.addGrammarElement("positionalExpression",function(e,t,r){var n=r.matchAnyToken("first","last","random");if(!n)return;r.matchAnyToken("in","from","of");var i=e.requireElement("unaryExpression",r);let o=n.value;return{type:"positionalExpression",rhs:i,operator:n.value,args:[i],op:function(e,t){if(t&&!Array.isArray(t)&&(t=t.children?t.children:Array.from(t)),t){if("first"===o)return t[0];if("last"===o)return t[t.length-1];if("random"===o)return t[Math.floor(Math.random()*t.length)]}},evaluate:function(e){return t.unifiedEval(this,e)}}}),t.addGrammarElement("mathOperator",function(e,t,r){var n,i=e.parseElement("unaryExpression",r),o=null;for(n=r.matchAnyOpToken("+","-","*","/")||r.matchToken("mod");n;){o=o||n;var a=n.value;o.value!==a&&e.raiseParseError(r,"You must parenthesize math operations with different operators");var s=e.parseElement("unaryExpression",r);i={type:"mathOperator",lhs:i,rhs:s,operator:a,args:[i,s],op:function(e,t,r){return"+"===a?t+r:"-"===a?t-r:"*"===a?t*r:"/"===a?t/r:"mod"===a?t%r:void 0},evaluate:function(e){return t.unifiedEval(this,e)}},n=r.matchAnyOpToken("+","-","*","/")||r.matchToken("mod")}return i}),t.addGrammarElement("mathExpression",function(e,t,r){return e.parseAnyOf(["mathOperator","unaryExpression"],r)}),t.addGrammarElement("comparisonOperator",function(e,t,r){var n=e.parseElement("mathExpression",r),i=r.matchAnyOpToken("<",">","<=",">=","==","===","!=","!=="),o=i?i.value:null,a=!0,s=!1;if(null==o&&(r.matchToken("is")||r.matchToken("am")?r.matchToken("not")?r.matchToken("in")?o="not in":r.matchToken("a")?(o="not a",s=!0):r.matchToken("empty")?(o="not empty",a=!1):(o=r.matchToken("really")?"!==":"!=",r.matchToken("equal")&&r.matchToken("to")):r.matchToken("in")?o="in":r.matchToken("a")?(o="a",s=!0):r.matchToken("empty")?(o="empty",a=!1):r.matchToken("less")?(r.requireToken("than"),r.matchToken("or")?(r.requireToken("equal"),r.requireToken("to"),o="<="):o="<"):r.matchToken("greater")?(r.requireToken("than"),r.matchToken("or")?(r.requireToken("equal"),r.requireToken("to"),o=">="):o=">"):(o=r.matchToken("really")?"===":"==",r.matchToken("equal")&&r.matchToken("to")):r.matchToken("equals")?o="==":r.matchToken("really")?(r.requireToken("equals"),o="==="):r.matchToken("exist")||r.matchToken("exists")?(o="exist",a=!1):r.matchToken("matches")||r.matchToken("match")?o="match":r.matchToken("contains")||r.matchToken("contain")?o="contain":r.matchToken("includes")||r.matchToken("include")?o="include":(r.matchToken("do")||r.matchToken("does"))&&(r.requireToken("not"),r.matchToken("matches")||r.matchToken("match")?o="not match":r.matchToken("contains")||r.matchToken("contain")?o="not contain":r.matchToken("exist")||r.matchToken("exist")?(o="not exist",a=!1):r.matchToken("include")?o="not include":e.raiseParseError(r,"Expected matches or contains"))),o){s?(u=r.requireTokenType("IDENTIFIER"),l=!r.matchOpToken("!")):a&&(c=e.requireElement("mathExpression",r),("match"===o||"not match"===o)&&(c=c.css?c.css:c));var u,l,c,m=n;n={type:"comparisonOperator",operator:o,typeName:u,nullOk:l,lhs:n,rhs:c,args:[n,c],op:function(e,r,n){if("=="===o)return r==n;if("!="===o)return r!=n;if("==="===o)return r===n;if("!=="===o)return r!==n;if("match"===o)return null!=r&&h(m,r,n);if("not match"===o)return null==r||!h(m,r,n);if("in"===o)return null!=n&&f(c,n,r);if("not in"===o)return null==n||!f(c,n,r);if("contain"===o)return null!=r&&f(m,r,n);if("not contain"===o)return null==r||!f(m,r,n);if("include"===o)return null!=r&&f(m,r,n);if("not include"===o)return null==r||!f(m,r,n);if("==="===o)return r===n;if("!=="===o)return r!==n;if("<"===o)return r<n;if(">"===o)return r>n;if("<="===o)return r<=n;if(">="===o)return r>=n;if("empty"===o)return t.isEmpty(r);else if("not empty"===o)return!t.isEmpty(r);else if("exist"===o)return t.doesExist(r);else if("not exist"===o)return!t.doesExist(r);else if("a"===o)return t.typeCheck(r,u.value,l);else if("not a"===o)return!t.typeCheck(r,u.value,l);else throw"Unknown comparison : "+o},evaluate:function(e){return t.unifiedEval(this,e)}}}return n}),t.addGrammarElement("comparisonExpression",function(e,t,r){return e.parseAnyOf(["comparisonOperator","mathExpression"],r)}),t.addGrammarElement("logicalOperator",function(e,t,r){var n,i=e.parseElement("comparisonExpression",r),o=null;for(n=r.matchToken("and")||r.matchToken("or");n;){(o=o||n).value!==n.value&&e.raiseParseError(r,"You must parenthesize logical operations with different operators");var a=e.requireElement("comparisonExpression",r);let s=n.value;i={type:"logicalOperator",operator:s,lhs:i,rhs:a,args:[i,a],op:function(e,t,r){return"and"===s?t&&r:t||r},evaluate:function(e){return t.unifiedEval(this,e)}},n=r.matchToken("and")||r.matchToken("or")}return i}),t.addGrammarElement("logicalExpression",function(e,t,r){return e.parseAnyOf(["logicalOperator","mathExpression"],r)}),t.addGrammarElement("asyncExpression",function(e,t,r){return r.matchToken("async")?{type:"asyncExpression",value:e.requireElement("logicalExpression",r),evaluate:function(e){return{asyncWrapper:!0,value:this.value.evaluate(e)}}}:e.parseElement("logicalExpression",r)}),t.addGrammarElement("expression",function(e,t,r){return r.matchToken("the"),e.parseElement("asyncExpression",r)}),t.addGrammarElement("assignableExpression",function(e,t,r){r.matchToken("the");var n=e.parseElement("primaryExpression",r);return n&&("symbol"===n.type||"ofExpression"===n.type||"propertyAccess"===n.type||"attributeRefAccess"===n.type||"attributeRef"===n.type||"styleRef"===n.type||"arrayIndex"===n.type||"possessive"===n.type)||e.raiseParseError(r,"A target expression must be writable.  The expression type '"+(n&&n.type)+"' is not."),n}),t.addGrammarElement("hyperscript",function(e,t,r){var n=[];if(r.hasMore())for(;e.featureStart(r.currentToken())||"("===r.currentToken().value;){var i=e.requireElement("feature",r);n.push(i),r.matchToken("end")}return{type:"hyperscript",features:n,apply:function(e,t,r){for(let i of n)i.install(e,t,r)}}});var d=function(e){var t=[];if("("===e.token(0).value&&(")"===e.token(1).value||","===e.token(2).value||")"===e.token(2).value)){e.matchOpToken("(");do t.push(e.requireTokenType("IDENTIFIER"));while(e.matchOpToken(","))e.requireOpToken(")")}return t};function v(e,t,r,n){var i=t.requireElement("eventName",n),o=t.parseElement("namedArgumentList",n);if("send"===e&&n.matchToken("to")||"trigger"===e&&n.matchToken("on"))var a=t.requireElement("expression",n);else var a=t.requireElement("implicitMeTarget",n);var s={eventName:i,details:o,to:a,args:[a,i,o],op:function(e,t,n,i){return r.nullCheck(t,a),r.implicitLoop(t,function(t){r.triggerEvent(t,n,i,e.me)}),r.findNext(s,e)}};return s}t.addFeature("on",function(e,t,r){if(r.matchToken("on")){var n,i,o=!1;r.matchToken("every")&&(o=!0);var a=[],s=null;do{var u,l,c,f,m,h=e.requireElement("eventName",r,"Expected event name").evaluate();s=s?s+" or "+h:"on "+h;var p=d(r),v=null;if(r.matchOpToken("[")&&(v=e.requireElement("expression",r),r.requireOpToken("]")),"NUMBER"===r.currentToken().type){var g=r.consumeToken();if(!g.value)return;if(u=parseInt(g.value),r.matchToken("to")){var E=r.consumeToken();if(!E.value)return;l=parseInt(E.value)}else r.matchToken("and")&&(c=!0,r.requireToken("on"))}if("intersection"===h){if(f={},r.matchToken("with")&&(f.with=e.requireElement("expression",r).evaluate()),r.matchToken("having"))do r.matchToken("margin")?f.rootMargin=e.requireElement("stringLike",r).evaluate():r.matchToken("threshold")?f.threshold=e.requireElement("expression",r).evaluate():e.raiseParseError(r,"Unknown intersection config specification");while(r.matchToken("and"))}else if("mutation"===h){if(m={},r.matchToken("of"))do if(r.matchToken("anything"))m.attributes=!0,m.subtree=!0,m.characterData=!0,m.childList=!0;else if(r.matchToken("childList"))m.childList=!0;else if(r.matchToken("attributes"))m.attributes=!0,m.attributeOldValue=!0;else if(r.matchToken("subtree"))m.subtree=!0;else if(r.matchToken("characterData"))m.characterData=!0,m.characterDataOldValue=!0;else if("ATTRIBUTE_REF"===r.currentToken().type){var y=r.consumeToken();null==m.attributeFilter&&(m.attributeFilter=[]),0==y.value.indexOf("@")?m.attributeFilter.push(y.value.substring(1)):e.raiseParseError(r,"Only shorthand attribute references are allowed here")}else e.raiseParseError(r,"Unknown mutation config specification");while(r.matchToken("or"))else m.attributes=!0,m.characterData=!0,m.childList=!0}var T=null,x=!1;if(r.matchToken("from")){if(r.matchToken("elsewhere"))x=!0;else{r.pushFollow("or");try{T=e.requireElement("expression",r)}finally{r.popFollow()}T||e.raiseParseError(r,'Expected either target value or "elsewhere".')}}if(null===T&&!1===x&&r.matchToken("elsewhere")&&(x=!0),r.matchToken("in"))var k=e.parseElement("unaryExpression",r);if(r.matchToken("debounced")){r.requireToken("at");var b=e.requireElement("unaryExpression",r),S=b.evaluate({})}else if(r.matchToken("throttled")){r.requireToken("at");var b=e.requireElement("unaryExpression",r),w=b.evaluate({})}a.push({execCount:0,every:o,on:h,args:p,filter:v,from:T,inExpr:k,elsewhere:x,startCount:u,endCount:l,unbounded:c,debounceTime:S,throttleTime:w,mutationSpec:m,intersectionSpec:f,debounced:void 0,lastExec:void 0})}while(r.matchToken("or"))var q=!0;if(!o&&r.matchToken("queue")){if(r.matchToken("all"))var q=!1;else if(r.matchToken("first"))var C=!0;else if(r.matchToken("none"))var N=!0;else r.requireToken("last")}var R=e.requireElement("commandList",r);if(e.ensureTerminated(R),r.matchToken("catch")&&(n=r.requireTokenType("IDENTIFIER").value,i=e.requireElement("commandList",r),e.ensureTerminated(i)),r.matchToken("finally")){var O=e.requireElement("commandList",r);e.ensureTerminated(O)}var A={displayName:s,events:a,start:R,every:o,execCount:0,errorHandler:i,errorSymbol:n,execute:function(e){let r=t.getEventQueueFor(e.me,A);if(r.executing&&!1===o){if(N||C&&r.queue.length>0)return;q&&(r.queue.length=0),r.queue.push(e);return}A.execCount++,r.executing=!0,e.meta.onHalt=function(){r.executing=!1;var e=r.queue.shift();e&&setTimeout(function(){A.execute(e)},1)},e.meta.reject=function(r){console.error(r.message?r.message:r);var n=t.getHyperTrace(e,r);n&&n.print(),t.triggerEvent(e.me,"exception",{error:r})},R.execute(e)},install:function(e,r){for(let r of A.events){var o;o=r.elsewhere?[document]:r.from?r.from.evaluate(t.makeContext(e,A,e,null)):[e],t.implicitLoop(o,function(o){var a=r.on;if(null==o){console.warn("'%s' feature ignored because target does not exists:",s,e);return}if(r.mutationSpec&&(a="hyperscript:mutation",new MutationObserver(function(e,r){A.executing||t.triggerEvent(o,a,{mutationList:e,observer:r})}).observe(o,r.mutationSpec)),r.intersectionSpec){a="hyperscript:intersection";let e=new IntersectionObserver(function(r){for(let i of r){var n={observer:e};(n=Object.assign(n,i)).intersecting=i.isIntersecting,t.triggerEvent(o,a,n)}},r.intersectionSpec);e.observe(o)}(o.addEventListener||o.on).call(o,a,function s(u){if("undefined"!=typeof Node&&e instanceof Node&&o!==e&&!e.isConnected){o.removeEventListener(a,s);return}var l=t.makeContext(e,A,e,u);if(!(r.elsewhere&&e.contains(u.target))){for(let e of(r.from&&(l.result=o),r.args)){let t=l.event[e.value];void 0!==t?l.locals[e.value]=t:"detail"in l.event&&(l.locals[e.value]=l.event.detail[e.value])}if(l.meta.errorHandler=i,l.meta.errorSymbol=n,l.meta.finallyHandler=O,r.filter){var c=l.meta.context;l.meta.context=l.event;try{if(!r.filter.evaluate(l))return}finally{l.meta.context=c}}if(r.inExpr){for(var f=u.target;;)if(f.matches&&f.matches(r.inExpr.css)){l.result=f;break}else if(null==(f=f.parentElement))return}if(r.execCount++,r.startCount){if(r.endCount){if(r.execCount<r.startCount||r.execCount>r.endCount)return}else if(r.unbounded){if(r.execCount<r.startCount)return}else if(r.execCount!==r.startCount)return}if(r.debounceTime){r.debounced&&clearTimeout(r.debounced),r.debounced=setTimeout(function(){A.execute(l)},r.debounceTime);return}if(r.throttleTime){if(r.lastExec&&Date.now()<r.lastExec+r.throttleTime)return;r.lastExec=Date.now()}A.execute(l)}})})}}};return e.setParent(R,A),A}}),t.addFeature("def",function(e,t,r){if(r.matchToken("def")){var n,i,o=e.requireElement("dotOrColonPath",r),a=o.evaluate(),s=a.split("."),u=s.pop(),l=[];if(r.matchOpToken("(")){if(r.matchOpToken(")"));else{do l.push(r.requireTokenType("IDENTIFIER"));while(r.matchOpToken(","))r.requireOpToken(")")}}var c=e.requireElement("commandList",r);if(r.matchToken("catch")&&(n=r.requireTokenType("IDENTIFIER").value,i=e.parseElement("commandList",r)),r.matchToken("finally")){var f=e.requireElement("commandList",r);e.ensureTerminated(f)}var m={displayName:u+"("+l.map(function(e){return e.value}).join(", ")+")",name:u,args:l,start:c,errorHandler:i,errorSymbol:n,finallyHandler:f,install:function(e,r){var o=function(){var o=t.makeContext(r,m,e,null);o.meta.errorHandler=i,o.meta.errorSymbol=n,o.meta.finallyHandler=f;for(var a=0;a<l.length;a++){var s=l[a],u=arguments[a];s&&(o.locals[s.value]=u)}o.meta.caller=arguments[l.length],o.meta.caller&&(o.meta.callingCommand=o.meta.caller.meta.command);var h,p=null,d=new Promise(function(e,t){h=e,p=t});return(c.execute(o),o.meta.returned)?o.meta.returnValue:(o.meta.resolve=h,o.meta.reject=p,d)};o.hyperfunc=!0,o.hypername=a,t.assignToNamespace(e,s,u,o)}};return e.ensureTerminated(c),i&&e.ensureTerminated(i),e.setParent(c,m),m}}),t.addFeature("set",function(e,t,r){let n=e.parseElement("setCommand",r);if(n){"element"!==n.target.scope&&e.raiseParseError(r,"variables declared at the feature level must be element scoped.");let i={start:n,install:function(e,r){n&&n.execute(t.makeContext(e,i,e,null))}};return e.ensureTerminated(n),i}}),t.addFeature("init",function(e,t,r){if(r.matchToken("init")){var n=r.matchToken("immediately"),i=e.requireElement("commandList",r),o={start:i,install:function(e,r){let a=function(){i&&i.execute(t.makeContext(e,o,e,null))};n?a():setTimeout(a,0)}};return e.ensureTerminated(i),e.setParent(i,o),o}}),t.addFeature("worker",function(e,t,r){if(r.matchToken("worker")){e.raiseParseError(r,"In order to use the 'worker' feature, include the _hyperscript worker plugin. See https://hyperscript.org/features/worker/ for more info.");return}}),t.addFeature("behavior",function(t,r,n){if(n.matchToken("behavior")){var i=t.requireElement("dotOrColonPath",n).evaluate(),o=i.split("."),a=o.pop(),s=[];if(n.matchOpToken("(")&&!n.matchOpToken(")")){do s.push(n.requireTokenType("IDENTIFIER").value);while(n.matchOpToken(","))n.requireOpToken(")")}for(var u=t.requireElement("hyperscript",n),l=0;l<u.features.length;l++)u.features[l].behavior=i;return{install:function(t,n){r.assignToNamespace(e.document&&e.document.body,o,a,function(e,t,n){for(var o=p(r.getInternalData(e),i+"Scope"),a=0;a<s.length;a++)o[s[a]]=n[s[a]];u.apply(e,t)})}}}}),t.addFeature("install",function(t,r,n){if(n.matchToken("install")){var i,o=t.requireElement("dotOrColonPath",n).evaluate(),a=o.split("."),s=t.parseElement("namedArgumentList",n);return i={install:function(t,n){r.unifiedEval({args:[s],op:function(r,i){for(var s=e,u=0;u<a.length;u++)if("object"!=typeof(s=s[a[u]])&&"function"!=typeof s)throw Error("No such behavior defined as "+o);if(!(s instanceof Function))throw Error(o+" is not a behavior");s(t,n,i)}},r.makeContext(t,i,t,null))}}}}),t.addGrammarElement("jsBody",function(e,t,r){for(var n=r.currentToken().start,i=r.currentToken(),o=[],a="",s=!1;r.hasMore();){i=r.consumeToken();var u=r.token(0,!0);if("IDENTIFIER"===u.type&&"end"===u.value)break;s?"IDENTIFIER"===i.type||"NUMBER"===i.type?a+=i.value:(""!==a&&o.push(a),a="",s=!1):"IDENTIFIER"===i.type&&"function"===i.value&&(s=!0)}var l=i.end+1;return{type:"jsBody",exposedFunctionNames:o,jsSource:r.source.substring(n,l)}}),t.addFeature("js",function(t,r,n){if(n.matchToken("js")){var i=t.requireElement("jsBody",n),o=i.jsSource+"\nreturn { "+i.exposedFunctionNames.map(function(e){return e+":"+e}).join(",")+" } ",a=Function(o);return{jsSource:o,function:a,exposedFunctionNames:i.exposedFunctionNames,install:function(){Object.assign(e,a())}}}}),t.addCommand("js",function(t,r,n){if(n.matchToken("js")){var i=[];if(n.matchOpToken("(")){if(n.matchOpToken(")"));else{do{var o=n.requireTokenType("IDENTIFIER");i.push(o.value)}while(n.matchOpToken(","))n.requireOpToken(")")}}var a=t.requireElement("jsBody",n);n.matchToken("end");var s=g(Function,i.concat([a.jsSource])),u={jsSource:a.jsSource,function:s,inputs:i,op:function(t){var n=[];i.forEach(function(e){n.push(r.resolveSymbol(e,t,"default"))});var o=s.apply(e,n);return o&&"function"==typeof o.then?new Promise(function(e){o.then(function(n){t.result=n,e(r.findNext(this,t))})}):(t.result=o,r.findNext(this,t))}};return u}}),t.addCommand("async",function(e,t,r){if(r.matchToken("async")){if(r.matchToken("do")){for(var n=e.requireElement("commandList",r),i=n;i.next;)i=i.next;i.next=t.HALT,r.requireToken("end")}else var n=e.requireElement("command",r);var o={body:n,op:function(e){return setTimeout(function(){n.execute(e)}),t.findNext(this,e)}};return e.setParent(n,o),o}}),t.addCommand("tell",function(e,t,r){var n=r.currentToken();if(r.matchToken("tell")){var i=e.requireElement("expression",r),o=e.requireElement("commandList",r);r.hasMore()&&!e.featureStart(r.currentToken())&&r.requireToken("end");var a="tell_"+n.start,s={value:i,body:o,args:[i],resolveNext:function(e){var r=e.meta.iterators[a];return r.index<r.value.length?(e.you=r.value[r.index++],o):(e.you=r.originalYou,this.next)?this.next:t.findNext(this.parent,e)},op:function(e,t){return null==t?t=[]:Array.isArray(t)||t instanceof NodeList||(t=[t]),e.meta.iterators[a]={originalYou:e.you,index:0,value:t},this.resolveNext(e)}};return e.setParent(o,s),s}}),t.addCommand("wait",function(e,t,r){if(r.matchToken("wait")){if(!r.matchToken("for"))return r.matchToken("a")?(r.requireToken("tick"),i=0):i=e.requireElement("expression",r),n={type:"waitCmd",time:i,args:[i],op:function(e,r){return new Promise(n=>{setTimeout(()=>{n(t.findNext(this,e))},r)})},execute:function(e){return t.unifiedExec(this,e)}};r.matchToken("a");var n,i,o=[];do{var a=r.token(0);"NUMBER"===a.type||"L_PAREN"===a.type?o.push({time:e.requireElement("expression",r).evaluate()}):o.push({name:e.requireElement("dotOrColonPath",r,"Expected event name").evaluate(),args:d(r)})}while(r.matchToken("or"))if(r.matchToken("from"))var s=e.requireElement("expression",r);return{event:o,on:s,args:[s],op:function(e,r){var n=r||e.me;if(!(n instanceof EventTarget))throw Error("Not a valid event target: "+this.on.sourceFor());return new Promise(r=>{var i=!1;for(let s of o){var a=n=>{if(e.result=n,s.args)for(let t of s.args)e.locals[t.value]=n[t.value]||(n.detail?n.detail[t.value]:null);i||(i=!0,r(t.findNext(this,e)))};s.name?n.addEventListener(s.name,a,{once:!0}):null!=s.time&&setTimeout(a,s.time,s.time)}})}}}}),t.addGrammarElement("dotOrColonPath",function(e,t,r){var n=r.matchTokenType("IDENTIFIER");if(n){var i=[n.value],o=r.matchOpToken(".")||r.matchOpToken(":");if(o)do i.push(r.requireTokenType("IDENTIFIER","NUMBER").value);while(r.matchOpToken(o.value))return{type:"dotOrColonPath",path:i,evaluate:function(){return i.join(o?o.value:"")}}}}),t.addGrammarElement("eventName",function(e,t,r){var n;return(n=r.matchTokenType("STRING"))?{evaluate:function(){return n.value}}:e.parseElement("dotOrColonPath",r)}),t.addCommand("trigger",function(e,t,r){if(r.matchToken("trigger"))return v("trigger",e,t,r)}),t.addCommand("send",function(e,t,r){if(r.matchToken("send"))return v("send",e,t,r)});var E=function(e,t,r,n){if(n){if(e.commandBoundary(r.currentToken()))e.raiseParseError(r,"'return' commands must return a value.  If you do not wish to return a value, use 'exit' instead.");else var i=e.requireElement("expression",r)}return{value:i,args:[i],op:function(e,r){var n=e.meta.resolve;return e.meta.returned=!0,e.meta.returnValue=r,n&&(r?n(r):n()),t.HALT}}};t.addCommand("return",function(e,t,r){if(r.matchToken("return"))return E(e,t,r,!0)}),t.addCommand("exit",function(e,t,r){if(r.matchToken("exit"))return E(e,t,r,!1)}),t.addCommand("halt",function(e,t,r){if(r.matchToken("halt")){if(r.matchToken("the")){r.requireToken("event"),r.matchOpToken("'")&&r.requireToken("s");var n=!0}if(r.matchToken("bubbling"))var i=!0;else if(r.matchToken("default"))var o=!0;var a=E(e,t,r,!1);return{keepExecuting:!0,bubbling:i,haltDefault:o,exit:a,op:function(e){if(e.event)return(i?e.event.stopPropagation():(o||e.event.stopPropagation(),e.event.preventDefault()),n)?t.findNext(this,e):a}}}}),t.addCommand("log",function(e,t,r){if(r.matchToken("log")){for(var n=[e.parseElement("expression",r)];r.matchOpToken(",");)n.push(e.requireElement("expression",r));if(r.matchToken("with"))var i=e.requireElement("expression",r);var o={exprs:n,withExpr:i,args:[i,n],op:function(e,r,n){return r?r.apply(null,n):console.log.apply(null,n),t.findNext(this,e)}};return o}}),t.addCommand("beep!",function(e,t,r){if(r.matchToken("beep!")){for(var n=[e.parseElement("expression",r)];r.matchOpToken(",");)n.push(e.requireElement("expression",r));var i={exprs:n,args:[n],op:function(e,r){for(let i=0;i<n.length;i++){let o=n[i],a=r[i];t.beepValueToConsole(e.me,o,a)}return t.findNext(this,e)}};return i}}),t.addCommand("throw",function(e,t,r){if(r.matchToken("throw")){var n=e.requireElement("expression",r),i={expr:n,args:[n],op:function(e,r){throw t.registerHyperTrace(e,r),r}};return i}});var y=function(e,t,r){var n=e.requireElement("expression",r),i={expr:n,args:[n],op:function(e,r){return e.result=r,t.findNext(i,e)}};return i};t.addCommand("call",function(e,t,r){if(r.matchToken("call")){var n=y(e,t,r);return n.expr&&"functionCall"!==n.expr.type&&e.raiseParseError(r,"Must be a function invocation"),n}}),t.addCommand("get",function(e,t,r){if(r.matchToken("get"))return y(e,t,r)}),t.addCommand("make",function(e,t,r){if(r.matchToken("make")){r.matchToken("a")||r.matchToken("an");var n,i=e.requireElement("expression",r),o=[];if("queryRef"!==i.type&&r.matchToken("from"))do o.push(e.requireElement("expression",r));while(r.matchOpToken(","))if(r.matchToken("called"))var a=e.requireElement("symbol",r);return"queryRef"===i.type?{op:function(e){for(var r,n,o="div",s=[],u=/(?:(^|#|\.)([^#\. ]+))/g;r=u.exec(i.css);)""===r[1]?o=r[2].trim():"#"===r[1]?n=r[2].trim():s.push(r[2].trim());var l=document.createElement(o);void 0!==n&&(l.id=n);for(var c=0;c<s.length;c++){var f=s[c];l.classList.add(f)}return e.result=l,a&&t.setSymbol(a.name,e,a.scope,l),t.findNext(this,e)}}:{args:[i,o],op:function(e,r,n){return e.result=g(r,n),a&&t.setSymbol(a.name,e,a.scope,e.result),t.findNext(this,e)}}}}),t.addGrammarElement("pseudoCommand",function(e,t,r){let n=r.token(1);if(!(n&&n.op&&("."===n.value||"("===n.value)))return null;for(var i,o=e.requireElement("primaryExpression",r),a=o.root,s=o;null!=a.root;)s=s.root,a=a.root;if("functionCall"!==o.type&&e.raiseParseError(r,"Pseudo-commands must be function calls"),"functionCall"===s.type&&null==s.root.root){if(r.matchAnyToken("the","to","on","with","into","from","at"))var u=e.requireElement("expression",r);else if(r.matchToken("me"))var u=e.requireElement("implicitMeTarget",r)}return i=u?{type:"pseudoCommand",root:u,argExressions:s.argExressions,args:[u,s.argExressions],op:function(e,r,n){t.nullCheck(r,u);var o=r[s.root.name];return t.nullCheck(o,s),o.hyperfunc&&n.push(e),e.result=o.apply(r,n),t.findNext(i,e)},execute:function(e){return t.unifiedExec(this,e)}}:{type:"pseudoCommand",expr:o,args:[o],op:function(e,r){return e.result=r,t.findNext(i,e)},execute:function(e){return t.unifiedExec(this,e)}}});var T=function(e,t,r,n,i){var o="symbol"===n.type,a="attributeRef"===n.type,s="styleRef"===n.type,u="arrayIndex"===n.type;a||s||o||null!=n.root||e.raiseParseError(r,"Can only put directly into symbols, not references");var l=null,c=null;if(o);else if(a||s){l=e.requireElement("implicitMeTarget",r);var f=n}else if(u)c=n.firstIndex,l=n.root;else{c=n.prop?n.prop.value:null;var f=n.attribute;l=n.root}return{target:n,symbolWrite:o,value:i,args:[l,c,i],op:function(e,r,i,a){return o?t.setSymbol(n.name,e,n.scope,a):(t.nullCheck(r,l),u?r[i]=a:t.implicitLoop(r,function(e){f?"attributeRef"===f.type?null==a?e.removeAttribute(f.name):e.setAttribute(f.name,a):e.style[f.name]=a:e[i]=a})),t.findNext(this,e)}}};t.addCommand("default",function(e,t,r){if(r.matchToken("default")){var n=e.requireElement("assignableExpression",r);r.requireToken("to");var i=e.requireElement("expression",r),o=T(e,t,r,n,i),a={target:n,value:i,setter:o,args:[n],op:function(e,r){return r?t.findNext(this,e):o}};return o.parent=a,a}}),t.addCommand("set",function(e,t,r){if(r.matchToken("set")){if("L_BRACE"===r.currentToken().type){var n=e.requireElement("objectLiteral",r);r.requireToken("on");var i=e.requireElement("expression",r);return{objectLiteral:n,target:i,args:[n,i],op:function(e,r,n){return Object.assign(n,r),t.findNext(this,e)}}}try{r.pushFollow("to");var i=e.requireElement("assignableExpression",r)}finally{r.popFollow()}r.requireToken("to");var o=e.requireElement("expression",r);return T(e,t,r,i,o)}}),t.addCommand("if",function(e,t,r){if(!r.matchToken("if"))return;var n=e.requireElement("expression",r);r.matchToken("then");var i=e.parseElement("commandList",r),o=!1;let a=r.matchToken("else")||r.matchToken("otherwise");if(a){let t=r.peekToken("if");if(o=null!=t&&t.line===a.line)var s=e.parseElement("command",r);else var s=e.parseElement("commandList",r)}r.hasMore()&&!o&&r.requireToken("end");var u={expr:n,trueBranch:i,falseBranch:s,args:[n],op:function(e,r){return r?i:s||t.findNext(this,e)}};return e.setParent(i,u),e.setParent(s,u),u});var x=function(e,t,r,n){var i,o=t.currentToken();if(t.matchToken("for")||n){var a=t.requireTokenType("IDENTIFIER");i=a.value,t.requireToken("in");var s=e.requireElement("expression",t)}else if(t.matchToken("in")){i="it";var s=e.requireElement("expression",t)}else if(t.matchToken("while"))var u=e.requireElement("expression",t);else if(t.matchToken("until")){var l=!0;if(t.matchToken("event")){var c=e.requireElement("dotOrColonPath",t,"Expected event name");if(t.matchToken("from"))var f=e.requireElement("expression",t)}else var u=e.requireElement("expression",t)}else if(e.commandBoundary(t.currentToken())||"forever"===t.currentToken().value){t.matchToken("forever");var m=!0}else{var h=e.requireElement("expression",t);t.requireToken("times")}if(t.matchToken("index"))var a=t.requireTokenType("IDENTIFIER"),p=a.value;var d=e.parseElement("commandList",t);if(d&&c){for(var v=d;v.next;)v=v.next;var g={type:"waitATick",op:function(){return new Promise(function(e){setTimeout(function(){e(r.findNext(g))},0)})}};v.next=g}if(t.hasMore()&&t.requireToken("end"),null==i)var E=i="_implicit_repeat_"+o.start;else var E=i+"_"+o.start;var y={identifier:i,indexIdentifier:p,slot:E,expression:s,forever:m,times:h,until:l,event:c,on:f,whileExpr:u,resolveNext:function(){return this},loop:d,args:[u,h],op:function(e,t,n){var o=e.meta.iterators[E],a=!1,s=null;if(this.forever)a=!0;else if(this.until)a=c?!1===e.meta.iterators[E].eventFired:!0!==t;else if(u)a=t;else if(n)a=o.index<n;else{var l=o.iterator.next();a=!l.done,s=l.value}return a?(o.value?e.result=e.locals[i]=s:e.result=o.index,p&&(e.locals[p]=o.index),o.index++,d):(e.meta.iterators[E]=null,r.findNext(this.parent,e))}};e.setParent(d,y);var T={name:"repeatInit",args:[s,c,f],op:function(e,t,r,n){var i={index:0,value:t,eventFired:!1};return e.meta.iterators[E]=i,t&&t[Symbol.iterator]&&(i.iterator=t[Symbol.iterator]()),c&&(n||e.me).addEventListener(r,function(t){e.meta.iterators[E].eventFired=!0},{once:!0}),y},execute:function(e){return r.unifiedExec(this,e)}};return e.setParent(y,T),T};function k(e,t,r){r.matchToken("at")||r.matchToken("from");let n={includeStart:!0,includeEnd:!1};return n.from=r.matchToken("start")?0:e.requireElement("expression",r),(r.matchToken("to")||r.matchOpToken(".."))&&(r.matchToken("end")?n.toEnd=!0:n.to=e.requireElement("expression",r)),r.matchToken("inclusive")?n.includeEnd=!0:r.matchToken("exclusive")&&(n.includeStart=!1),n}t.addCommand("repeat",function(e,t,r){if(r.matchToken("repeat"))return x(e,r,t,!1)}),t.addCommand("for",function(e,t,r){if(r.matchToken("for"))return x(e,r,t,!0)}),t.addCommand("continue",function(e,t,r){if(r.matchToken("continue")){var n={op:function(t){for(var n=this.parent;;n=n.parent)if(void 0==n&&e.raiseParseError(r,"Command `continue` cannot be used outside of a `repeat` loop."),void 0!=n.loop)return n.resolveNext(t)}};return n}}),t.addCommand("break",function(e,t,r){if(r.matchToken("break")){var n={op:function(n){for(var i=this.parent;;i=i.parent)if(void 0==i&&e.raiseParseError(r,"Command `continue` cannot be used outside of a `repeat` loop."),void 0!=i.loop)return t.findNext(i.parent,n)}};return n}}),t.addGrammarElement("stringLike",function(e,t,r){return e.parseAnyOf(["string","nakedString"],r)}),t.addCommand("append",function(e,t,r){if(r.matchToken("append")){var n=null,i=e.requireElement("expression",r),o={type:"symbol",evaluate:function(e){return t.resolveSymbol("result",e)}};n=r.matchToken("to")?e.requireElement("expression",r):o;var a=null;("symbol"===n.type||"attributeRef"===n.type||null!=n.root)&&(a=T(e,t,r,n,o));var s={value:i,target:n,args:[n,i],op:function(e,r,n){if(Array.isArray(r))return r.push(n),t.findNext(this,e);if(r instanceof Element)return r.innerHTML+=n,t.findNext(this,e);if(a)return e.result=(r||"")+n,a;throw Error("Unable to append a value!")},execute:function(e){return t.unifiedExec(this,e)}};return null!=a&&(a.parent=s),s}});class b{constructor(e,t){this.re=e,this.str=t}next(){let e=this.re.exec(this.str);return null===e?{done:!0}:{value:e}}}class S{constructor(e,t,r){this.re=e,this.flags=t,this.str=r}[Symbol.iterator](){return new b(new RegExp(this.re,this.flags),this.str)}}function w(e,t){var r,n="text";return e.matchToken("a")||e.matchToken("an"),e.matchToken("json")||e.matchToken("Object")?n="json":e.matchToken("response")?n="response":e.matchToken("html")?n="html":e.matchToken("text")||(r=t.requireElement("dotOrColonPath",e).evaluate()),{type:n,conversion:r}}t.addCommand("pick",(e,t,r)=>{if(r.matchToken("pick")){if(r.matchToken("the"),r.matchToken("item")||r.matchToken("items")||r.matchToken("character")||r.matchToken("characters")){let n=k(e,t,r);return r.requireToken("from"),{args:[e.requireElement("expression",r),n.from,n.to],op(e,r,i,o){return n.toEnd&&(o=r.length),!n.includeStart&&i++,n.includeEnd&&o++,(null==o||void 0==o)&&(o=i+1),e.result=r.slice(i,o),t.findNext(this,e)}}}if(r.matchToken("match")){r.matchToken("of");let n=e.parseElement("expression",r),i="";return r.matchOpToken("|")&&(i=r.requireToken("identifier").value),r.requireToken("from"),{args:[e.parseElement("expression",r),n],op(e,r,n){return e.result=new RegExp(n,i).exec(r),t.findNext(this,e)}}}if(r.matchToken("matches")){r.matchToken("of");let n=e.parseElement("expression",r),i="gu";return r.matchOpToken("|")&&(i="g"+r.requireToken("identifier").value.replace("g","")),console.log("flags",i),r.requireToken("from"),{args:[e.parseElement("expression",r),n],op(e,r,n){return e.result=new S(n,i,r),t.findNext(this,e)}}}}}),t.addCommand("increment",function(e,t,r){if(r.matchToken("increment")){var n,i=e.parseElement("assignableExpression",r);r.matchToken("by")&&(n=e.requireElement("expression",r));var o={type:"implicitIncrementOp",target:i,args:[i,n],op:function(e,t,r){var i=(t=t?parseFloat(t):0)+(r=n?parseFloat(r):1);return e.result=i,i},evaluate:function(e){return t.unifiedEval(this,e)}};return T(e,t,r,i,o)}}),t.addCommand("decrement",function(e,t,r){if(r.matchToken("decrement")){var n,i=e.parseElement("assignableExpression",r);r.matchToken("by")&&(n=e.requireElement("expression",r));var o={type:"implicitDecrementOp",target:i,args:[i,n],op:function(e,t,r){var i=(t=t?parseFloat(t):0)-(r=n?parseFloat(r):1);return e.result=i,i},evaluate:function(e){return t.unifiedEval(this,e)}};return T(e,t,r,i,o)}}),t.addCommand("fetch",function(e,t,r){if(r.matchToken("fetch")){var n=e.requireElement("stringLike",r);if(r.matchToken("as"))var i=w(r,e);if(r.matchToken("with")&&"{"!==r.currentToken().value)var o=e.parseElement("nakedNamedArgumentList",r);else var o=e.parseElement("objectLiteral",r);null==i&&r.matchToken("as")&&(i=w(r,e));var a=i?i.type:"text",s=i?i.conversion:null,u={url:n,argExpressions:o,args:[n,o],op:function(e,r,n){var i=n||{};i.sender=e.me,i.headers=i.headers||{};var o=new AbortController;let l=e.me.addEventListener("fetch:abort",function(){o.abort()},{once:!0});i.signal=o.signal,t.triggerEvent(e.me,"hyperscript:beforeFetch",i),t.triggerEvent(e.me,"fetch:beforeRequest",i);var c=!1;return(n=i).timeout&&setTimeout(function(){c||o.abort()},n.timeout),fetch(r,n).then(function(r){let n={response:r};return(t.triggerEvent(e.me,"fetch:afterResponse",n),r=n.response,"response"===a)?(e.result=r,t.triggerEvent(e.me,"fetch:afterRequest",{result:r}),c=!0,t.findNext(u,e)):"json"===a?r.json().then(function(r){return e.result=r,t.triggerEvent(e.me,"fetch:afterRequest",{result:r}),c=!0,t.findNext(u,e)}):r.text().then(function(r){return s&&(r=t.convertValue(r,s)),"html"===a&&(r=t.convertValue(r,"Fragment")),e.result=r,t.triggerEvent(e.me,"fetch:afterRequest",{result:r}),c=!0,t.findNext(u,e)})}).catch(function(r){throw t.triggerEvent(e.me,"fetch:error",{reason:r}),r}).finally(function(){e.me.removeEventListener("fetch:abort",l)})}};return u}})}function y(e){e.addCommand("settle",function(e,t,r){if(r.matchToken("settle")){if(e.commandBoundary(r.currentToken()))var n=e.requireElement("implicitMeTarget",r);else var n=e.requireElement("expression",r);var i={type:"settleCmd",args:[n],op:function(e,r){t.nullCheck(r,n);var o=null,a=!1,s=!1,u=new Promise(function(e){o=e});return r.addEventListener("transitionstart",function(){s=!0},{once:!0}),setTimeout(function(){s||a||o(t.findNext(i,e))},500),r.addEventListener("transitionend",function(){a||o(t.findNext(i,e))},{once:!0}),u},execute:function(e){return t.unifiedExec(this,e)}};return i}}),e.addCommand("add",function(e,t,r){if(r.matchToken("add")){var n=e.parseElement("classRef",r),i=null,o=null;if(null==n)null==(i=e.parseElement("attributeRef",r))&&null==(o=e.parseElement("styleLiteral",r))&&e.raiseParseError(r,"Expected either a class reference or attribute expression");else for(var a=[n];n=e.parseElement("classRef",r);)a.push(n);if(r.matchToken("to"))var s=e.requireElement("expression",r);else var s=e.requireElement("implicitMeTarget",r);if(r.matchToken("when")){o&&e.raiseParseError(r,"Only class and properties are supported with a when clause");var u=e.requireElement("expression",r)}return a?{classRefs:a,to:s,args:[s,a],op:function(e,r,n){return t.nullCheck(r,s),t.forEach(n,function(n){t.implicitLoop(r,function(r){u?(e.result=r,t.evaluateNoPromise(u,e)?r instanceof Element&&r.classList.add(n.className):r instanceof Element&&r.classList.remove(n.className),e.result=null):r instanceof Element&&r.classList.add(n.className)})}),t.findNext(this,e)}}:i?{type:"addCmd",attributeRef:i,to:s,args:[s],op:function(e,r,n){return t.nullCheck(r,s),t.implicitLoop(r,function(r){u?(e.result=r,t.evaluateNoPromise(u,e)?r.setAttribute(i.name,i.value):r.removeAttribute(i.name),e.result=null):r.setAttribute(i.name,i.value)}),t.findNext(this,e)},execute:function(e){return t.unifiedExec(this,e)}}:{type:"addCmd",cssDeclaration:o,to:s,args:[s,o],op:function(e,r,n){return t.nullCheck(r,s),t.implicitLoop(r,function(e){e.style.cssText+=n}),t.findNext(this,e)},execute:function(e){return t.unifiedExec(this,e)}}}}),e.addGrammarElement("styleLiteral",function(e,t,r){if(r.matchOpToken("{")){for(var n=[""],i=[];r.hasMore();){if(r.matchOpToken("\\"))r.consumeToken();else if(r.matchOpToken("}"))break;else if(r.matchToken("$")){var o=r.matchOpToken("{"),a=e.parseElement("expression",r);o&&r.requireOpToken("}"),i.push(a),n.push("")}else{var s=r.consumeToken();n[n.length-1]+=r.source.substring(s.start,s.end)}n[n.length-1]+=r.lastWhitespace()}return{type:"styleLiteral",args:[i],op:function(e,t){var r="";return n.forEach(function(e,n){r+=e,n in t&&(r+=t[n])}),r},evaluate:function(e){return t.unifiedEval(this,e)}}}}),e.addCommand("remove",function(e,t,r){if(r.matchToken("remove")){var n=e.parseElement("classRef",r),i=null,o=null;if(null==n)null==(i=e.parseElement("attributeRef",r))&&null==(o=e.parseElement("expression",r))&&e.raiseParseError(r,"Expected either a class reference, attribute expression or value expression");else for(var a=[n];n=e.parseElement("classRef",r);)a.push(n);if(r.matchToken("from"))var s=e.requireElement("expression",r);else if(null==o)var s=e.requireElement("implicitMeTarget",r);return o?{elementExpr:o,from:s,args:[o,s],op:function(e,r,n){return t.nullCheck(r,o),t.implicitLoop(r,function(e){e.parentElement&&(null==n||n.contains(e))&&e.parentElement.removeChild(e)}),t.findNext(this,e)}}:{classRefs:a,attributeRef:i,elementExpr:o,from:s,args:[a,s],op:function(e,r,n){return t.nullCheck(n,s),r?t.forEach(r,function(e){t.implicitLoop(n,function(t){t.classList.remove(e.className)})}):t.implicitLoop(n,function(e){e.removeAttribute(i.name)}),t.findNext(this,e)}}}}),e.addCommand("toggle",function(e,t,r){if(r.matchToken("toggle")){if(r.matchAnyToken("the","my"),"STYLE_REF"===r.currentToken().type){var n=r.consumeToken().value.substr(1),o=!0,a=i(e,r,n);if(r.matchToken("of")){r.pushFollow("with");try{var s=e.requireElement("expression",r)}finally{r.popFollow()}}else var s=e.requireElement("implicitMeTarget",r)}else if(r.matchToken("between")){var u=!0,l=e.parseElement("classRef",r);r.requireToken("and");var c=e.requireElement("classRef",r)}else{var l=e.parseElement("classRef",r),f=null;if(null==l)null==(f=e.parseElement("attributeRef",r))&&e.raiseParseError(r,"Expected either a class reference or attribute expression");else for(var m=[l];l=e.parseElement("classRef",r);)m.push(l)}if(!0!==o){if(r.matchToken("on"))var s=e.requireElement("expression",r);else var s=e.requireElement("implicitMeTarget",r)}if(r.matchToken("for"))var h=e.requireElement("expression",r);else if(r.matchToken("until")){var p=e.requireElement("dotOrColonPath",r,"Expected event name");if(r.matchToken("from"))var d=e.requireElement("expression",r)}var v={classRef:l,classRef2:c,classRefs:m,attributeRef:f,on:s,time:h,evt:p,from:d,toggle:function(e,r,n,i){t.nullCheck(e,s),o?t.implicitLoop(e,function(e){a("toggle",e)}):u?t.implicitLoop(e,function(e){e.classList.contains(r.className)?(e.classList.remove(r.className),e.classList.add(n.className)):(e.classList.add(r.className),e.classList.remove(n.className))}):i?t.forEach(i,function(r){t.implicitLoop(e,function(e){e.classList.toggle(r.className)})}):t.forEach(e,function(e){e.hasAttribute(f.name)?e.removeAttribute(f.name):e.setAttribute(f.name,f.value)})},args:[s,h,p,d,l,c,m],op:function(e,r,n,i,o,a,s,u){return n?new Promise(function(i){v.toggle(r,a,s,u),setTimeout(function(){v.toggle(r,a,s,u),i(t.findNext(v,e))},n)}):i?new Promise(function(n){(o||e.me).addEventListener(i,function(){v.toggle(r,a,s,u),n(t.findNext(v,e))},{once:!0}),v.toggle(r,a,s,u)}):(this.toggle(r,a,s,u),t.findNext(v,e))}};return v}});var t={display:function(r,n,i){if(i)n.style.display=i;else if("toggle"===r)"none"===getComputedStyle(n).display?t.display("show",n,i):t.display("hide",n,i);else if("hide"===r){let t=e.runtime.getInternalData(n);null==t.originalDisplay&&(t.originalDisplay=n.style.display),n.style.display="none"}else{let t=e.runtime.getInternalData(n);t.originalDisplay&&"none"!==t.originalDisplay?n.style.display=t.originalDisplay:n.style.removeProperty("display")}},visibility:function(e,r,n){n?r.style.visibility=n:"toggle"===e?"hidden"===getComputedStyle(r).visibility?t.visibility("show",r,n):t.visibility("hide",r,n):"hide"===e?r.style.visibility="hidden":r.style.visibility="visible"},opacity:function(e,r,n){n?r.style.opacity=n:"toggle"===e?"0"===getComputedStyle(r).opacity?t.opacity("show",r,n):t.opacity("hide",r,n):"hide"===e?r.style.opacity="0":r.style.opacity="1"}},n=function(e,t,r){var n=r.currentToken();return"when"===n.value||"with"===n.value||e.commandBoundary(n)?e.parseElement("implicitMeTarget",r):e.parseElement("expression",r)},i=function(e,n,i){var o=r.defaultHideShowStrategy,a=t;r.hideShowStrategies&&(a=Object.assign(a,r.hideShowStrategies));var s=a[i=i||o||"display"];return null==s&&e.raiseParseError(n,"Unknown show/hide strategy : "+i),s};function o(t,r,n,i){if(null!=n)var o=t.resolveSymbol(n,r);else var o=r;if(o instanceof Element||o instanceof HTMLDocument){for(;o.firstChild;)o.removeChild(o.firstChild);o.append(e.runtime.convertValue(i,"Fragment")),t.processNode(o)}else if(null!=n)t.setSymbol(n,r,null,i);else throw"Don't know how to put a value into "+typeof r}function a(e,t,r){var n;if(r.matchToken("the")||r.matchToken("element")||r.matchToken("elements")||"CLASS_REF"===r.currentToken().type||"ID_REF"===r.currentToken().type||r.currentToken().op&&"<"===r.currentToken().value){e.possessivesDisabled=!0;try{n=e.parseElement("expression",r)}finally{delete e.possessivesDisabled}r.matchOpToken("'")&&r.requireToken("s")}else if("IDENTIFIER"===r.currentToken().type&&"its"===r.currentToken().value){var i=r.matchToken("its");n={type:"pseudopossessiveIts",token:i,name:i.value,evaluate:function(e){return t.resolveSymbol("it",e)}}}else r.matchToken("my")||r.matchToken("me"),n=e.parseElement("implicitMeTarget",r);return n}e.addCommand("hide",function(e,t,r){if(r.matchToken("hide")){var o=n(e,t,r),a=null;r.matchToken("with")&&0===(a=r.requireTokenType("IDENTIFIER","STYLE_REF").value).indexOf("*")&&(a=a.substr(1));var s=i(e,r,a);return{target:o,args:[o],op:function(e,r){return t.nullCheck(r,o),t.implicitLoop(r,function(e){s("hide",e)}),t.findNext(this,e)}}}}),e.addCommand("show",function(e,t,r){if(r.matchToken("show")){var o=n(e,t,r),a=null;r.matchToken("with")&&0===(a=r.requireTokenType("IDENTIFIER","STYLE_REF").value).indexOf("*")&&(a=a.substr(1));var s=null;if(r.matchOpToken(":")){var u=r.consumeUntilWhitespace();r.matchTokenType("WHITESPACE"),s=u.map(function(e){return e.value}).join("")}if(r.matchToken("when"))var l=e.requireElement("expression",r);var c=i(e,r,a);return{target:o,when:l,args:[o],op:function(e,r){return t.nullCheck(r,o),t.implicitLoop(r,function(r){l?(e.result=r,t.evaluateNoPromise(l,e)?c("show",r,s):c("hide",r),e.result=null):c("show",r,s)}),t.findNext(this,e)}}}}),e.addCommand("take",function(e,t,r){if(r.matchToken("take")){let u=null,l=[];for(;u=e.parseElement("classRef",r);)l.push(u);var n=null,i=null;let c=l.length>0;if(!c&&(null==(n=e.parseElement("attributeRef",r))&&e.raiseParseError(r,"Expected either a class reference or attribute expression"),r.matchToken("with")&&(i=e.requireElement("expression",r))),r.matchToken("from"))var o=e.requireElement("expression",r);if(r.matchToken("for"))var a=e.requireElement("expression",r);else var a=e.requireElement("implicitMeTarget",r);if(c){var s={classRefs:l,from:o,forElt:a,args:[l,o,a],op:function(e,r,n,i){return t.nullCheck(i,a),t.implicitLoop(r,function(e){var r=e.className;n?t.implicitLoop(n,function(e){e.classList.remove(r)}):t.implicitLoop(e,function(e){e.classList.remove(r)}),t.implicitLoop(i,function(e){e.classList.add(r)})}),t.findNext(this,e)}};return s}var s={attributeRef:n,from:o,forElt:a,args:[o,a,i],op:function(e,r,i,s){return t.nullCheck(r,o),t.nullCheck(i,a),t.implicitLoop(r,function(e){s?e.setAttribute(n.name,s):e.removeAttribute(n.name)}),t.implicitLoop(i,function(e){e.setAttribute(n.name,n.value||"")}),t.findNext(this,e)}};return s}}),e.addCommand("put",function(e,t,r){if(r.matchToken("put")){var n=e.requireElement("expression",r),i=r.matchAnyToken("into","before","after");null==i&&r.matchToken("at")&&(r.matchToken("the"),i=r.matchAnyToken("start","end"),r.requireToken("of")),null==i&&e.raiseParseError(r,"Expected one of 'into', 'before', 'at start of', 'at end of', 'after'");var a=e.requireElement("expression",r),s=i.value,u=!1,l=!1,c=null,f=null;if("arrayIndex"===a.type&&"into"===s)u=!0,f=a.prop,c=a.root;else if(a.prop&&a.root&&"into"===s)f=a.prop.value,c=a.root;else if("symbol"===a.type&&"into"===s)l=!0,f=a.name;else if("attributeRef"===a.type&&"into"===s){var m=!0;f=a.name,c=e.requireElement("implicitMeTarget",r)}else if("styleRef"===a.type&&"into"===s){var h=!0;f=a.name,c=e.requireElement("implicitMeTarget",r)}else if(a.attribute&&"into"===s){var m="attributeRef"===a.attribute.type,h="styleRef"===a.attribute.type;f=a.attribute.name,c=a.root}else c=a;return{target:a,operation:s,symbolWrite:l,value:n,args:[c,f,n],op:function(e,r,n,i){if(l)o(t,e,n,i);else if(t.nullCheck(r,c),"into"===s)m?t.implicitLoop(r,function(e){e.setAttribute(n,i)}):h?t.implicitLoop(r,function(e){e.style[n]=i}):u?r[n]=i:t.implicitLoop(r,function(e){o(t,e,n,i)});else{var a="before"===s?Element.prototype.before:"after"===s?Element.prototype.after:"start"===s?Element.prototype.prepend:Element.prototype.append;t.implicitLoop(r,function(e){a.call(e,i instanceof Node?i:t.convertValue(i,"Fragment")),e.parentElement?t.processNode(e.parentElement):t.processNode(e)})}return t.findNext(this,e)}}}}),e.addCommand("transition",function(e,t,n){if(n.matchToken("transition")){for(var i=a(e,t,n),o=[],s=[],u=[],l=n.currentToken();!e.commandBoundary(l)&&"over"!==l.value&&"using"!==l.value;){if("STYLE_REF"===n.currentToken().type){let e=n.consumeToken().value.substr(1);o.push({type:"styleRefValue",evaluate:function(){return e}})}else o.push(e.requireElement("stringLike",n));n.matchToken("from")?s.push(e.requireElement("expression",n)):s.push(null),n.requireToken("to"),n.matchToken("initial")?u.push({type:"initial_literal",evaluate:function(){return"initial"}}):u.push(e.requireElement("expression",n)),l=n.currentToken()}if(n.matchToken("over"))var c=e.requireElement("expression",n);else if(n.matchToken("using"))var f=e.requireElement("expression",n);var m={to:u,args:[i,o,s,u,f,c],op:function(e,n,o,a,s,u,l){t.nullCheck(n,i);var c=[];return t.implicitLoop(n,function(e){var n=new Promise(function(n,i){var c=e.style.transition;l?e.style.transition="all "+l+"ms ease-in":u?e.style.transition=u:e.style.transition=r.defaultTransition;for(var f=t.getInternalData(e),m=getComputedStyle(e),h={},p=0;p<m.length;p++){var d=m[p],v=m[d];h[d]=v}f.initialStyles||(f.initialStyles=h);for(var p=0;p<o.length;p++){var g=o[p],E=a[p];"computed"===E||null==E?e.style[g]=h[g]:e.style[g]=E}var y=!1,T=!1;e.addEventListener("transitionend",function(){T||(e.style.transition=c,T=!0,n())},{once:!0}),e.addEventListener("transitionstart",function(){y=!0},{once:!0}),setTimeout(function(){T||y||(e.style.transition=c,T=!0,n())},100),setTimeout(function(){for(var t=0;t<o.length;t++){var r=o[t],n=s[t];if("initial"===n){var i=f.initialStyles[r];e.style[r]=i}else e.style[r]=n}},0)});c.push(n)}),Promise.all(c).then(function(){return t.findNext(m,e)})}};return m}}),e.addCommand("measure",function(e,t,r){if(r.matchToken("measure")){var n=a(e,t,r),i=[];if(!e.commandBoundary(r.currentToken()))do i.push(r.matchTokenType("IDENTIFIER").value);while(r.matchOpToken(","))return{properties:i,args:[n],op:function(e,r){t.nullCheck(r,n),0 in r&&(r=r[0]);var o=r.getBoundingClientRect(),a={top:r.scrollTop,left:r.scrollLeft,topMax:r.scrollTopMax,leftMax:r.scrollLeftMax,height:r.scrollHeight,width:r.scrollWidth};return e.result={x:o.x,y:o.y,left:o.left,top:o.top,right:o.right,bottom:o.bottom,width:o.width,height:o.height,bounds:o,scrollLeft:a.left,scrollTop:a.top,scrollLeftMax:a.leftMax,scrollTopMax:a.topMax,scrollWidth:a.width,scrollHeight:a.height,scroll:a},t.forEach(i,function(t){if(t in e.result)e.locals[t]=e.result[t];else throw"No such measurement as "+t}),t.findNext(this,e)}}}}),e.addLeafExpression("closestExpr",function(e,t,r){if(r.matchToken("closest")){if(r.matchToken("parent"))var n=!0;var i=null;if("ATTRIBUTE_REF"===r.currentToken().type){var o=e.requireElement("attributeRefAccess",r,null);i="["+o.attribute.name+"]"}if(null==i){var a=e.requireElement("expression",r);null==a.css?e.raiseParseError(r,"Expected a CSS expression"):i=a.css}if(r.matchToken("to"))var s=e.parseElement("expression",r);else var s=e.parseElement("implicitMeTarget",r);var u={type:"closestExpr",parentSearch:n,expr:a,css:i,to:s,args:[s],op:function(e,r){if(null==r)return null;{let e=[];return(t.implicitLoop(r,function(t){n?e.push(t.parentElement?t.parentElement.closest(i):null):e.push(t.closest(i))}),t.shouldAutoIterate(r))?e:e[0]}},evaluate:function(e){return t.unifiedEval(this,e)}};return o?(o.root=u,o.args=[u],o):u}}),e.addCommand("go",function(e,t,r){if(r.matchToken("go")){if(r.matchToken("back"))var n=!0;else if(r.matchToken("to"),r.matchToken("url")){var i=e.requireElement("stringLike",r),o=!0;if(r.matchToken("in")){r.requireToken("new"),r.requireToken("window");var a=!0}}else{r.matchToken("the");var s=r.matchAnyToken("top","middle","bottom"),u=r.matchAnyToken("left","center","right");(s||u)&&r.requireToken("of");var i=e.requireElement("unaryExpression",r),l=r.matchAnyOpToken("+","-");if(l){r.pushFollow("px");try{var c=e.requireElement("expression",r)}finally{r.popFollow()}}r.matchToken("px");var f=r.matchAnyToken("smoothly","instantly"),m={block:"start",inline:"nearest"};s&&("top"===s.value?m.block="start":"bottom"===s.value?m.block="end":"middle"===s.value&&(m.block="center")),u&&("left"===u.value?m.inline="start":"center"===u.value?m.inline="center":"right"===u.value&&(m.inline="end")),f&&("smoothly"===f.value?m.behavior="smooth":"instantly"===f.value&&(m.behavior="instant"))}var h={target:i,args:[i,c],op:function(e,r,i){return n?window.history.back():o?r&&(a?window.open(r):window.location.href=r):t.implicitLoop(r,function(e){if(e===window&&(e=document.body),l){let t=e.getBoundingClientRect(),r=document.createElement("div"),n="+"===l.value?i:-1*i,o="start"==m.inline||"end"==m.inline?n:0,a="start"==m.block||"end"==m.block?n:0;r.style.position="absolute",r.style.top=t.top+window.scrollY+a+"px",r.style.left=t.left+window.scrollX+o+"px",r.style.height=t.height+"px",r.style.width=t.width+"px",r.style.zIndex=""+Number.MIN_SAFE_INTEGER,r.style.opacity="0",document.body.appendChild(r),setTimeout(function(){document.body.removeChild(r)},100),e=r}e.scrollIntoView(m)}),t.findNext(h,e)}};return h}}),r.conversions.dynamicResolvers.push(function(t,r){if(!("Values"!==t&&0!==t.indexOf("Values:"))){var n=t.split(":")[1],i={},o=e.runtime.implicitLoop.bind(e.runtime);if(o(r,function(e){var t=s(e);if(void 0!==t){i[t.name]=t.value;return}void 0!=e.querySelectorAll&&e.querySelectorAll("input,select,textarea").forEach(a)}),!n)return i;if("JSON"===n)return JSON.stringify(i);if("Form"===n)return new URLSearchParams(i).toString();throw"Unknown conversion: "+n}function a(e){var t=s(e);if(void 0!=t){if(void 0==i[t.name]){i[t.name]=t.value;return}if(Array.isArray(i[t.name])&&Array.isArray(t.value)){i[t.name]=[].concat(i[t.name],t.value);return}}}function s(e){try{var t={name:e.name,value:e.value};if(void 0==t.name||void 0==t.value||"radio"==e.type&&!1==e.checked)return;if("checkbox"==e.type&&(!1==e.checked?t.value=void 0:"string"==typeof t.value&&(t.value=[t.value])),"select-multiple"==e.type){var r=e.querySelectorAll("option[selected]");t.value=[];for(var n=0;n<r.length;n++)t.value.push(r[n].value)}return t}catch(e){return}}}),r.conversions.HTML=function(e){var t=function(e){if(e instanceof Array)return e.map(function(e){return t(e)}).join("");if(e instanceof HTMLElement)return e.outerHTML;if(e instanceof NodeList){for(var r="",n=0;n<e.length;n++){var i=e[n];i instanceof HTMLElement&&(r+=i.outerHTML)}return r}return e.toString?e.toString():""};return t(e)},r.conversions.Fragment=function(t){var r=document.createDocumentFragment();return e.runtime.implicitLoop(t,function(e){if(e instanceof Node)r.append(e);else{var t=document.createElement("template");t.innerHTML=e,r.append(t.content)}}),r}}let T=new a,x=T.lexer,k=T.parser;function b(){function t(e){"loading"!==document.readyState?setTimeout(e):document.addEventListener("DOMContentLoaded",e)}function n(){var e=document.querySelector('meta[name="htmx-config"]');return e?d(e.content):null}function i(){var e=n();e&&Object.assign(r,e)}Promise.all(Array.from(e.document.querySelectorAll("script[type='text/hyperscript'][src]")).map(function(e){return fetch(e.src).then(function(e){return e.text()})})).then(e=>e.forEach(e=>S(e))).then(()=>t(function(){i(),T.processNode(document.documentElement),e.document.addEventListener("htmx:load",function(e){T.processNode(e.detail.elt)})}))}let S=Object.assign(function(e,t){return T.evaluate(e,t)},{config:r,use(e){e(S)},internals:{lexer:x,parser:k,runtime:T,Lexer:n,Tokens:i,Parser:o,Runtime:a},ElementCollection:m,addFeature:k.addFeature.bind(k),addCommand:k.addCommand.bind(k),addLeafExpression:k.addLeafExpression.bind(k),addIndirectExpression:k.addIndirectExpression.bind(k),evaluate:T.evaluate.bind(T),parse:T.parse.bind(T),processNode:T.processNode.bind(T),version:"0.9.12",browserInit:b});return S})}();
//# sourceMappingURL=scripts.js.map
